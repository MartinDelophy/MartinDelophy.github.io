<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><title>java 注解 | MartinDelophy</title><meta name="viewport" content="width=640"/><link rel="stylesheet" href="/style.css"/></head><body><header><section><a class="nav-home" href="/">MartinDelophy</a><nav><a href="/blog">技术博客</a><a href="/#">个人简历</a><a href="/#">图标3</a><a href="/#" class="active">图标4</a><a href="/#">图标5</a></nav><div class="algolia-search-wrapper"><input type="text" id="algolia-search-input" placeholder="请搜索..."/></div></section></header><section><div class="documentationContent"><div class="inner-content"><h1>java 注解</h1><p>2017-5-13 by MartinDelophy</p><hr/><div><p>从读研开始做OA项目一晃将近半年了，一直在用到java方面的注解，愚钝的我直到现在才开始考虑到如何自定义注解，从网上看到了一个好例子，分享出来给需要帮助的人使用。</p><p>那么首先我们先做一个接口，这个接口的作用是作为注解引用的，里面做了一个枚举类型，定义了一个Tt()方法，默认值为C</p><pre class="prism language-undefined">@<span class="function">Target</span><span class="punctuation">(</span>ElementType<span class="punctuation">.</span>FIELD<span class="punctuation">)</span>  
@<span class="function">Retention</span><span class="punctuation">(</span>RetentionPolicy<span class="punctuation">.</span>RUNTIME<span class="punctuation">)</span>  
@Inherited  
@Documented  
<span class="keyword">public</span> @<span class="keyword">interface</span> <span class="class-name">test</span> <span class="punctuation">{</span>
  <span class="keyword">public</span> <span class="keyword">enum</span> T<span class="punctuation">{</span> A<span class="punctuation">,</span>B<span class="punctuation">,</span>C<span class="punctuation">}</span><span class="punctuation">;</span>
      T  <span class="function">Tt</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="keyword">default</span> T<span class="punctuation">.</span>C<span class="punctuation">;</span> 
<span class="punctuation">}</span></pre><p>之后我们定义了一个 test2的类，外加一个主函数目的很简单，就是为了让test3去读我们test2的class类</p><pre class="prism language-undefined"><span class="keyword">public</span> <span class="keyword">class</span> <span class="class-name">test2</span> <span class="punctuation">{</span>
    @<span class="function">test</span><span class="punctuation">(</span>Tt<span class="operator">=</span> test<span class="punctuation">.</span>T<span class="punctuation">.</span>C<span class="punctuation">)</span>
    <span class="keyword">private</span> String t<span class="punctuation">;</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="function">main</span><span class="punctuation">(</span>String<span class="punctuation">[</span><span class="punctuation">]</span> args<span class="punctuation">)</span> <span class="punctuation">{</span>
                test3<span class="punctuation">.</span><span class="function">gettest</span><span class="punctuation">(</span>test2<span class="punctuation">.</span><span class="keyword">class</span><span class="punctuation">)</span><span class="punctuation">;</span>
          <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p>test3就是看test2的类中有没有test注解，有的话就是输出来看看</p><pre class="prism language-undefined"><span class="keyword">public</span> <span class="keyword">class</span> <span class="class-name">test3</span> <span class="punctuation">{</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="function">gettest</span><span class="punctuation">(</span>Class<span class="operator">&lt;</span><span class="operator">?</span><span class="operator">&gt;</span> clazz<span class="punctuation">)</span> <span class="punctuation">{</span>

             String str<span class="operator">=</span><span class="string">&quot;&quot;</span><span class="punctuation">;</span>

         Field<span class="punctuation">[</span><span class="punctuation">]</span> fields <span class="operator">=</span> clazz<span class="punctuation">.</span><span class="function">getDeclaredFields</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>

         <span class="keyword">for</span><span class="punctuation">(</span>Field field <span class="punctuation">:</span>fields<span class="punctuation">)</span> <span class="punctuation">{</span>

                <span class="keyword">if</span><span class="punctuation">(</span>field<span class="punctuation">.</span><span class="function">isAnnotationPresent</span><span class="punctuation">(</span>test<span class="punctuation">.</span><span class="keyword">class</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">{</span>

                  test t<span class="operator">=</span><span class="punctuation">(</span>test<span class="punctuation">)</span> field<span class="punctuation">.</span><span class="function">getAnnotation</span><span class="punctuation">(</span>test<span class="punctuation">.</span><span class="keyword">class</span><span class="punctuation">)</span><span class="punctuation">;</span>

                   str<span class="operator">=</span>str<span class="operator">+</span>t<span class="punctuation">.</span><span class="function">Tt</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>

                   System<span class="punctuation">.</span>out<span class="punctuation">.</span><span class="function">println</span><span class="punctuation">(</span>str<span class="punctuation">)</span><span class="punctuation">;</span>
        <span class="punctuation">}</span>
    <span class="punctuation">}</span>
  <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p>结果，控制台输出的是 C，因为一开始将枚举中，默认的C传入，再字符串拼接，显示</p></div></div><div class="nav-docs"><div class="nav-docs-section"><h3>Subscribe</h3><a rel="home" type="application/rss+xml" href="/blog/rss.xml">RSS</a></div><div class="nav-docs-section"><h3>Recent Posts</h3><ul><li><a href="/blog/java-backengineering/">java 反向工程</a></li><li><a href="/blog/continous-publish/">持续发布项目</a></li><li><a href="/blog/model-engine/">java script 模版引擎初探</a></li><li><a href="/blog/java-jvm2/">浅谈 node-jvm(2)</a></li><li><a href="/blog/java-jvm/">浅谈 node-jvm(1)</a></li><li>java 注解</li></ul></div></div></div></section><footer><section><a class="footer-home" href="/">MartinDelophy powered by graphql.org</a></section></footer></body></html>        <canvas id="live2d" width="260" height="300" className="live_2d" style="position:fixed;right:0px;bottom:0px" /><script src="/static/js/live2d.min.js"></script><!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><title>java 注解 | MartinDelophy</title><meta name="viewport" content="width=640"/><link rel="stylesheet" href="/style.css"/></head><body><header><section><a class="nav-home" href="/">MartinDelophy</a><nav><a href="/blog">技术博客</a><a href="/#">个人简历</a><a href="/#">图标3</a><a href="/#" class="active">图标4</a><a href="/#">图标5</a></nav><div class="algolia-search-wrapper"><input type="text" id="algolia-search-input" placeholder="请搜索..."/></div></section></header><section><div class="documentationContent"><div class="inner-content"><h1>java 注解</h1><p>2017-5-13 by MartinDelophy</p><hr/><div><p>从读研开始做OA项目一晃将近半年了，一直在用到java方面的注解，愚钝的我直到现在才开始考虑到如何自定义注解，从网上看到了一个好例子，分享出来给需要帮助的人使用。</p><p>那么首先我们先做一个接口，这个接口的作用是作为注解引用的，里面做了一个枚举类型，定义了一个Tt()方法，默认值为C</p><pre class="prism language-undefined">@<span class="function">Target</span><span class="punctuation">(</span>ElementType<span class="punctuation">.</span>FIELD<span class="punctuation">)</span>  
@<span class="function">Retention</span><span class="punctuation">(</span>RetentionPolicy<span class="punctuation">.</span>RUNTIME<span class="punctuation">)</span>  
@Inherited  
@Documented  
<span class="keyword">public</span> @<span class="keyword">interface</span> <span class="class-name">test</span> <span class="punctuation">{</span>
  <span class="keyword">public</span> <span class="keyword">enum</span> T<span class="punctuation">{</span> A<span class="punctuation">,</span>B<span class="punctuation">,</span>C<span class="punctuation">}</span><span class="punctuation">;</span>
      T  <span class="function">Tt</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="keyword">default</span> T<span class="punctuation">.</span>C<span class="punctuation">;</span> 
<span class="punctuation">}</span></pre><p>之后我们定义了一个 test2的类，外加一个主函数目的很简单，就是为了让test3去读我们test2的class类</p><pre class="prism language-undefined"><span class="keyword">public</span> <span class="keyword">class</span> <span class="class-name">test2</span> <span class="punctuation">{</span>
    @<span class="function">test</span><span class="punctuation">(</span>Tt<span class="operator">=</span> test<span class="punctuation">.</span>T<span class="punctuation">.</span>C<span class="punctuation">)</span>
    <span class="keyword">private</span> String t<span class="punctuation">;</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="function">main</span><span class="punctuation">(</span>String<span class="punctuation">[</span><span class="punctuation">]</span> args<span class="punctuation">)</span> <span class="punctuation">{</span>
                test3<span class="punctuation">.</span><span class="function">gettest</span><span class="punctuation">(</span>test2<span class="punctuation">.</span><span class="keyword">class</span><span class="punctuation">)</span><span class="punctuation">;</span>
          <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p>test3就是看test2的类中有没有test注解，有的话就是输出来看看</p><pre class="prism language-undefined"><span class="keyword">public</span> <span class="keyword">class</span> <span class="class-name">test3</span> <span class="punctuation">{</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="function">gettest</span><span class="punctuation">(</span>Class<span class="operator">&lt;</span><span class="operator">?</span><span class="operator">&gt;</span> clazz<span class="punctuation">)</span> <span class="punctuation">{</span>

             String str<span class="operator">=</span><span class="string">&quot;&quot;</span><span class="punctuation">;</span>

         Field<span class="punctuation">[</span><span class="punctuation">]</span> fields <span class="operator">=</span> clazz<span class="punctuation">.</span><span class="function">getDeclaredFields</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>

         <span class="keyword">for</span><span class="punctuation">(</span>Field field <span class="punctuation">:</span>fields<span class="punctuation">)</span> <span class="punctuation">{</span>

                <span class="keyword">if</span><span class="punctuation">(</span>field<span class="punctuation">.</span><span class="function">isAnnotationPresent</span><span class="punctuation">(</span>test<span class="punctuation">.</span><span class="keyword">class</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">{</span>

                  test t<span class="operator">=</span><span class="punctuation">(</span>test<span class="punctuation">)</span> field<span class="punctuation">.</span><span class="function">getAnnotation</span><span class="punctuation">(</span>test<span class="punctuation">.</span><span class="keyword">class</span><span class="punctuation">)</span><span class="punctuation">;</span>

                   str<span class="operator">=</span>str<span class="operator">+</span>t<span class="punctuation">.</span><span class="function">Tt</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>

                   System<span class="punctuation">.</span>out<span class="punctuation">.</span><span class="function">println</span><span class="punctuation">(</span>str<span class="punctuation">)</span><span class="punctuation">;</span>
        <span class="punctuation">}</span>
    <span class="punctuation">}</span>
  <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p>结果，控制台输出的是 C，因为一开始将枚举中，默认的C传入，再字符串拼接，显示</p></div></div><div class="nav-docs"><div class="nav-docs-section"><h3>Subscribe</h3><a rel="home" type="application/rss+xml" href="/blog/rss.xml">RSS</a></div><div class="nav-docs-section"><h3>Recent Posts</h3><ul><li><a href="/blog/java-backengineering/">java 反向工程</a></li><li><a href="/blog/continous-publish/">持续发布项目</a></li><li><a href="/blog/model-engine/">java script 模版引擎初探</a></li><li><a href="/blog/java-jvm2/">浅谈 node-jvm(2)</a></li><li><a href="/blog/java-jvm/">浅谈 node-jvm(1)</a></li><li>java 注解</li></ul></div></div></div></section><footer><section><a class="footer-home" href="/">MartinDelophy powered by graphql.org</a></section></footer></body></html><script>if (!this.readyState || this.readyState == "complete") { window.loadlive2d("live2d","/static/live2d-widget-model-shizuku/assets/shizuku.model.json") }</script>