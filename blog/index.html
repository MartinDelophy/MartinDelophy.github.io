<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><title>Blog | MartinDelophy</title><meta name="viewport" content="width=640"/><link rel="stylesheet" href="/style.css"/></head><body><header><section><a class="nav-home" href="/">MartinDelophy</a><nav><a href="/blog">技术博客</a><a href="/#">个人简历</a><a href="/#">图标3</a><a href="/#" class="active">图标4</a><a href="/#">图标5</a></nav><div class="algolia-search-wrapper"><input type="text" id="algolia-search-input" placeholder="请搜索..."/></div></section></header><section><div class="documentationContent"><div><div class="inner-content"><h1><a href="/blog/java-backengineering/">java 反向工程</a></h1><p>2018-7-13 by MartinDelophy</p><hr/><div><p>java 反向工程主要是通过将数据库中的表反向映射成java实体类和Repository文件，能够减轻开发者开发的困难。
这个项目主要是一年前实现的，在这里也就不详细解释了。
项目地址：<a href="https://github.com/MartinDelophy/javaBackEngineering">https://github.com/MartinDelophy/javaBackEngineering</a></p></div></div><div class="inner-content"><h1><a href="/blog/continous-publish/">持续发布项目</a></h1><p>2018-7-12 by MartinDelophy</p><hr/><div><p><code>序言</code>：一晃做厦门海洋经济运行监测系统已经很长一段时间了，总的来说，收获颇多，接下来会陆续发布几篇博客来对这个项目收获到的经验来做一定的整理。</p><p>那么今天，我们主要来谈谈什么是持续发布。</p><p>发布：顾名思义就是将我们的代码打包后运行在我们的服务器上，能够让人们看到这个项目。
持续发布：那就是阶段性的发布到服务器上，能够给予用户较好的体验。</p><h3><a class="anchor" name=""></a>为什么要这么做？ <a class="hash-link" href="#">#</a></h3><p>原因很简单，1.用户有时并不能明确自己需要的是什么。2.你有时未必正确理解了用户的想法。那么以上两点原因直接导致了你做的产品不一定满足了用户的需求，所以，需要持续性的部署才能，让用户有较好的体验。</p><p>通常，人们部署系统的方式是通过远程登陆的方案，然后将文件拷贝到某一个路径下，然后重新启动服务（这是一种比较low的方案）,好一点的方案便是用jenkins这类工具集成、部署。但如果是在内网中，这样的方案时间开销也是巨大的。所以，今天，我来教大家一种持续发布的代码。</p><p>代码在:<a href="https://github.com/MartinDelophy/continousPublishOnWindows">https://github.com/MartinDelophy/continousPublishOnWindows</a>
可以看到，具体配置可以根据情况进行更改。</p><p>持续发布步骤说明：
1.通过net use指令来进行远成连接
2.复制文件到指定远程目录
3.设定schtasks来创建定时器（由于schtasks必须要设定启动时间，所以如果要立即执行，就要在这之后 run一下）启动远程脚本
4.启动远程脚本，运行项目</p><p>这样就实现了一键式的项目发布，很简单吧。</p></div></div><div class="inner-content"><h1><a href="/blog/model-engine/">java script 模版引擎初探</a></h1><p>2018-5-18 by MartinDelophy</p><hr/><div><p>模版引擎，众所周知就是将你需要绑定的值从后端传到前端，帮助用户解决变量预留的问题。</p><p>那么我的想法就是去构建一个模版引擎，帮助用户去解决这个问题。
那么，首先我们应该怎么做呢？
我的设计想法如下：</p><div><div width="100%" style="overflow-x: auto;"> 
<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="571" height="315" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[html->jsbox: bypass context
jsbox->js: extract value bypass value
js-jsbox: find value bind value
jsbox-html: find context bind context]]></source><desc></desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"></g><g class="actor"><path d="M10,20C36.3,22.4 37.4,17.6 70.7,20.0C69.0,44.0 72.4,26.8 70.7,62.5C56.2,64.9 53.0,60.1 10.0,62.5C8.3,30.2 11.7,52.3 10.0,20.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="20" y="44" style="font-size: 16px; font-family: danielbd;"><tspan x="20">html</tspan></text></g><g class="actor"><path d="M10,252.5C19.7,250.1 27.4,254.9 70.7,252.5C69.0,284.8 72.4,277.3 70.7,295.0C49.9,297.4 46.3,292.6 10.0,295.0C11.7,283.5 8.3,259.3 10.0,252.5" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="20" y="276.5" style="font-size: 16px; font-family: danielbd;"><tspan x="20">html</tspan></text></g><path d="M40.4,62.5C32.8,206.9 48.0,109.5 40.4,252.5" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="actor"><path d="M246.109375,20C272.3,22.6 292.8,17.4 310.3,20.0C308.6,47.1 312.0,45.3 310.3,62.5C268.7,65.1 272.9,59.9 246.1,62.5C247.8,54.1 244.4,29.6 246.1,20.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="257.34375" y="44" style="font-size: 16px; font-family: danielbd;"><tspan x="256.109375">jsbox</tspan></text></g><g class="actor"><path d="M246.109375,252.5C287.1,249.9 256.4,255.1 310.3,252.5C312.0,288.2 308.6,274.2 310.3,295.0C257.1,292.4 261.5,297.6 246.1,295.0C244.4,272.3 247.8,284.1 246.1,252.5" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="257.34375" y="276.5" style="font-size: 16px; font-family: danielbd;"><tspan x="256.109375">jsbox</tspan></text></g><path d="M278.2,62.5C270.6,191.2 285.8,193.9 278.2,252.5" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="actor"><path d="M506.984375,20C515.4,21.4 517.8,18.6 541.9,20.0C543.6,30.0 540.2,30.2 541.9,62.5C515.4,61.1 517.3,63.9 507.0,62.5C505.3,26.8 508.7,52.2 507.0,20.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="518.21875" y="44" style="font-size: 16px; font-family: danielbd;"><tspan x="516.984375">js</tspan></text></g><g class="actor"><path d="M506.984375,252.5C535.0,253.9 520.0,251.1 541.9,252.5C540.2,262.7 543.6,268.6 541.9,295.0C526.9,293.6 524.4,296.4 507.0,295.0C505.3,259.3 508.7,277.1 507.0,252.5" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="518.21875" y="276.5" style="font-size: 16px; font-family: danielbd;"><tspan x="516.984375">js</tspan></text></g><path d="M524.5,62.5C516.9,165.2 532.1,114.0 524.5,252.5" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="signal"><text x="95.6328125" y="90.25" style="font-size: 16px; font-family: danielbd;"><tspan x="95.6328125">bypass context</tspan></text><path d="M40.4,105.0C163.7,114.5 78.4,95.5 278.2,105.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="288.2265625" y="132.75" style="font-size: 16px; font-family: danielbd;"><tspan x="288.2265625">extract value bypass value</tspan></text><path d="M278.2,147.5C326.4,137.7 337.3,157.3 524.5,147.5" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="313.5625" y="175.25" style="font-size: 16px; font-family: danielbd;"><tspan x="313.5625">find value bind value</tspan></text><path d="M524.5,190.0C458.0,199.8 337.3,180.2 278.2,190.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="50.3671875" y="217.75" style="font-size: 16px; font-family: danielbd;"><tspan x="50.3671875">find context bind context</tspan></text><path d="M278.2,232.5C203.6,242.0 97.5,223.0 40.4,232.5" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g></svg>
</div>


</div><p>首先，将html的整个内容塞到 jsbox 中，之后将内容中的有效绑定字段进行提取，传到后端，解析字段。
通过后端拿到相应的字段的值，绑定之后推到jsbox中，在将jsbox中的内容推到前端进行渲染。</p><p>为了验证这个想法，我写了一个demo，地址在：<a href="https://github.com/MartinDelophy/narko">https://github.com/MartinDelophy/narko</a>
相应的demo在test文件夹中，可以通过npm install 来对本模版引擎进行安装。
当然，这个模版有很多的地方需要改进，比如多网页模版，组建生命周期，双向绑定。</p></div></div><div class="inner-content"><h1><a href="/blog/java-jvm2/">浅谈 node-jvm(2)</a></h1><p>2018-5-15 by MartinDelophy</p><hr/><div><p>上回，我们很简单的对node-jvm进行了一定的分析，但问题还是停留在表面，仅仅只是介绍了node 里面的一些特点，和java并无很多的关系，今天让我们接着来讲后续的内容。
要想很清晰的知道后续的内容，我们首先要对java class类文件做一定的了解。
我想在网上这样的文章算是比较多了，我推荐几个链接可以去看看
1.<a href="https://blog.csdn.net/u010425776/article/details/51245055">https://blog.csdn.net/u010425776/article/details/51245055</a>
2.<a href="https://www.cnblogs.com/Qian123/p/5707562.html">https://www.cnblogs.com/Qian123/p/5707562.html</a>
3.<a href="https://blog.csdn.net/u013309870/article/details/72975536">https://blog.csdn.net/u013309870/article/details/72975536</a>
4.<a href="http://www.blogjava.net/DLevin/archive/2011/09/05/358033.html">http://www.blogjava.net/DLevin/archive/2011/09/05/358033.html</a>
5.<a href="http://www.blogjava.net/DLevin/archive/2011/09/05/358034.html">http://www.blogjava.net/DLevin/archive/2011/09/05/358034.html</a></p><p>看了上面几个文章之后，我们开始实战来分析一下下面的代码
首先看到的是用来针对fib 进行计算的java文件</p><p>Main.java</p><pre class="prism language-undefined"><span class="keyword">public</span> <span class="keyword">class</span> <span class="class-name">Main</span> <span class="punctuation">{</span>

    <span class="keyword">public</span> <span class="keyword">static</span> long <span class="function">fib</span><span class="punctuation">(</span>int n<span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">if</span> <span class="punctuation">(</span>n <span class="operator">&lt;=</span> <span class="number">1</span><span class="punctuation">)</span>
            <span class="keyword">return</span> n<span class="punctuation">;</span>
        <span class="keyword">return</span> <span class="function">fib</span><span class="punctuation">(</span>n <span class="operator">-</span> <span class="number">1</span><span class="punctuation">)</span> <span class="operator">+</span> <span class="function">fib</span><span class="punctuation">(</span>n <span class="operator">-</span> <span class="number">2</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="function">main</span><span class="punctuation">(</span>String<span class="punctuation">[</span><span class="punctuation">]</span> args<span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">if</span> <span class="punctuation">(</span>args<span class="punctuation">.</span>length <span class="operator">==</span> <span class="number">0</span><span class="punctuation">)</span> <span class="punctuation">{</span>
            System<span class="punctuation">.</span>out<span class="punctuation">.</span><span class="function">print</span><span class="punctuation">(</span><span class="string">&quot;help: java Fibonacci {Number}&quot;</span><span class="punctuation">)</span><span class="punctuation">;</span>
            <span class="keyword">return</span><span class="punctuation">;</span>
        <span class="punctuation">}</span>

        int N <span class="operator">=</span> Integer<span class="punctuation">.</span><span class="function">parseInt</span><span class="punctuation">(</span>args<span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">;</span>

        long start <span class="operator">=</span> System<span class="punctuation">.</span><span class="function">currentTimeMillis</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
        System<span class="punctuation">.</span>out<span class="punctuation">.</span><span class="function">format</span><span class="punctuation">(</span><span class="string">&quot;Fibonacci from 1 to %s:\n&quot;</span><span class="punctuation">,</span> N<span class="punctuation">)</span><span class="punctuation">;</span>
        <span class="keyword">for</span> <span class="punctuation">(</span>int i <span class="operator">=</span> <span class="number">1</span><span class="punctuation">;</span> i <span class="operator">&lt;=</span> N<span class="punctuation">;</span> i<span class="operator">++</span><span class="punctuation">)</span> <span class="punctuation">{</span>
            System<span class="punctuation">.</span>out<span class="punctuation">.</span><span class="function">println</span><span class="punctuation">(</span>i <span class="operator">+</span> <span class="string">&quot;: &quot;</span> <span class="operator">+</span> <span class="function">fib</span><span class="punctuation">(</span>i<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
        <span class="punctuation">}</span>
        long stop <span class="operator">=</span> System<span class="punctuation">.</span><span class="function">currentTimeMillis</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
        System<span class="punctuation">.</span>out<span class="punctuation">.</span><span class="function">println</span><span class="punctuation">(</span><span class="string">&quot;time: &quot;</span> <span class="operator">+</span> <span class="punctuation">(</span>stop <span class="operator">-</span> start<span class="punctuation">)</span> <span class="operator">+</span> <span class="string">&quot;ms&quot;</span><span class="punctuation">)</span><span class="punctuation">;</span>

        System<span class="punctuation">.</span>out<span class="punctuation">.</span><span class="function">println</span><span class="punctuation">(</span><span class="string">&quot;done.&quot;</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p>该部分代码，主要是实现了最基本的fib 功能，并且调用。</p><p>那么接下来我用make 生成Main.class文件,然后通过
javap -v -verbose Main 分析一下改该类文件中的内容，内容如下：</p><pre class="prism language-undefined">Last modified May <span class="number">7</span><span class="punctuation">,</span> <span class="number">2018</span><span class="punctuation">;</span> size <span class="number">1286</span> bytes
  MD5 checksum 115352bb394b31575a6288f7bdf82f35
  Compiled <span class="keyword">from</span> <span class="string">&quot;Main.java&quot;</span>
<span class="keyword">public</span> <span class="keyword">class</span> <span class="class-name">Main</span>
  minor version<span class="punctuation">:</span> <span class="number">0</span>
  major version<span class="punctuation">:</span> <span class="number">52</span>
  flags<span class="punctuation">:</span> ACC_PUBLIC<span class="punctuation">,</span> ACC_SUPER
Constant pool<span class="punctuation">:</span>
   #<span class="number">1</span> <span class="operator">=</span> Methodref          #<span class="number">9</span><span class="punctuation">.</span>#<span class="number">35</span>         <span spellcheck="true" class="comment">// java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span>
   #<span class="number">2</span> <span class="operator">=</span> Methodref          #<span class="number">23</span><span class="punctuation">.</span>#<span class="number">36</span>        <span spellcheck="true" class="comment">// Main.fib:(I)J</span>
   #<span class="number">3</span> <span class="operator">=</span> Fieldref           #<span class="number">37</span><span class="punctuation">.</span>#<span class="number">38</span>        <span spellcheck="true" class="comment">// java/lang/System.out:Ljava/io/PrintStream;</span>
   #<span class="number">4</span> <span class="operator">=</span> String             #<span class="number">39</span>            <span spellcheck="true" class="comment">// help: java Fibonacci {Number}</span>
   #<span class="number">5</span> <span class="operator">=</span> Methodref          #<span class="number">40</span><span class="punctuation">.</span>#<span class="number">41</span>        <span spellcheck="true" class="comment">// java/io/PrintStream.print:(Ljava/lang/String;)V</span>
   #<span class="number">6</span> <span class="operator">=</span> Methodref          #<span class="number">42</span><span class="punctuation">.</span>#<span class="number">43</span>        <span spellcheck="true" class="comment">// java/lang/Integer.parseInt:(Ljava/lang/String;)I</span>
   #<span class="number">7</span> <span class="operator">=</span> Methodref          #<span class="number">37</span><span class="punctuation">.</span>#<span class="number">44</span>        <span spellcheck="true" class="comment">// java/lang/System.currentTimeMillis:()J</span>
   #<span class="number">8</span> <span class="operator">=</span> String             #<span class="number">45</span>            <span spellcheck="true" class="comment">// Fibonacci from 1 to %s:\n</span>
   #<span class="number">9</span> <span class="operator">=</span> Class              #<span class="number">46</span>            <span spellcheck="true" class="comment">// java/lang/Object</span>
  #<span class="number">10</span> <span class="operator">=</span> Methodref          #<span class="number">42</span><span class="punctuation">.</span>#<span class="number">47</span>        <span spellcheck="true" class="comment">// java/lang/Integer.valueOf:(I)Ljava/lang/Integer;</span>
  #<span class="number">11</span> <span class="operator">=</span> Methodref          #<span class="number">40</span><span class="punctuation">.</span>#<span class="number">48</span>        <span spellcheck="true" class="comment">// java/io/PrintStream.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/io/PrintStream;</span>
  #<span class="number">12</span> <span class="operator">=</span> Class              #<span class="number">49</span>            <span spellcheck="true" class="comment">// java/lang/StringBuilder</span>
  #<span class="number">13</span> <span class="operator">=</span> Methodref          #<span class="number">12</span><span class="punctuation">.</span>#<span class="number">35</span>        <span spellcheck="true" class="comment">// java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V</span>
  #<span class="number">14</span> <span class="operator">=</span> Methodref          #<span class="number">12</span><span class="punctuation">.</span>#<span class="number">50</span>        <span spellcheck="true" class="comment">// java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;</span>
  #<span class="number">15</span> <span class="operator">=</span> String             #<span class="number">51</span>            <span spellcheck="true" class="comment">// :</span>
  #<span class="number">16</span> <span class="operator">=</span> Methodref          #<span class="number">12</span><span class="punctuation">.</span>#<span class="number">52</span>        <span spellcheck="true" class="comment">// java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span>
  #<span class="number">17</span> <span class="operator">=</span> Methodref          #<span class="number">12</span><span class="punctuation">.</span>#<span class="number">53</span>        <span spellcheck="true" class="comment">// java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;</span>
  #<span class="number">18</span> <span class="operator">=</span> Methodref          #<span class="number">12</span><span class="punctuation">.</span>#<span class="number">54</span>        <span spellcheck="true" class="comment">// java/lang/StringBuilder.toString:()Ljava/lang/String;</span>
  #<span class="number">19</span> <span class="operator">=</span> Methodref          #<span class="number">40</span><span class="punctuation">.</span>#<span class="number">55</span>        <span spellcheck="true" class="comment">// java/io/PrintStream.println:(Ljava/lang/String;)V</span>
  #<span class="number">20</span> <span class="operator">=</span> String             #<span class="number">56</span>            <span spellcheck="true" class="comment">// time:</span>
  #<span class="number">21</span> <span class="operator">=</span> String             #<span class="number">57</span>            <span spellcheck="true" class="comment">// ms</span>
  #<span class="number">22</span> <span class="operator">=</span> String             #<span class="number">58</span>            <span spellcheck="true" class="comment">// done.</span>
  #<span class="number">23</span> <span class="operator">=</span> Class              #<span class="number">59</span>            <span spellcheck="true" class="comment">// Main</span>
  #<span class="number">24</span> <span class="operator">=</span> Utf8               <span class="operator">&lt;</span>init<span class="operator">&gt;</span>
  #<span class="number">25</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span><span class="punctuation">)</span>V
  #<span class="number">26</span> <span class="operator">=</span> Utf8               Code
  #<span class="number">27</span> <span class="operator">=</span> Utf8               LineNumberTable
  #<span class="number">28</span> <span class="operator">=</span> Utf8               fib
  #<span class="number">29</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span>I<span class="punctuation">)</span>J
  #<span class="number">30</span> <span class="operator">=</span> Utf8               StackMapTable
  #<span class="number">31</span> <span class="operator">=</span> Utf8               main
  #<span class="number">32</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span><span class="punctuation">[</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>String<span class="punctuation">;</span><span class="punctuation">)</span>V
  #<span class="number">33</span> <span class="operator">=</span> Utf8               SourceFile
  #<span class="number">34</span> <span class="operator">=</span> Utf8               Main<span class="punctuation">.</span>java
  #<span class="number">35</span> <span class="operator">=</span> NameAndType        #<span class="number">24</span><span class="punctuation">:</span>#<span class="number">25</span>        <span spellcheck="true" class="comment">// &quot;&lt;init&gt;&quot;:()V</span>
  #<span class="number">36</span> <span class="operator">=</span> NameAndType        #<span class="number">28</span><span class="punctuation">:</span>#<span class="number">29</span>        <span spellcheck="true" class="comment">// fib:(I)J</span>
  #<span class="number">37</span> <span class="operator">=</span> Class              #<span class="number">60</span>            <span spellcheck="true" class="comment">// java/lang/System</span>
  #<span class="number">38</span> <span class="operator">=</span> NameAndType        #<span class="number">61</span><span class="punctuation">:</span>#<span class="number">62</span>        <span spellcheck="true" class="comment">// out:Ljava/io/PrintStream;</span>
  #<span class="number">39</span> <span class="operator">=</span> Utf8               help<span class="punctuation">:</span> java Fibonacci <span class="punctuation">{</span>Number<span class="punctuation">}</span>
  #<span class="number">40</span> <span class="operator">=</span> Class              #<span class="number">63</span>            <span spellcheck="true" class="comment">// java/io/PrintStream</span>
  #<span class="number">41</span> <span class="operator">=</span> NameAndType        #<span class="number">64</span><span class="punctuation">:</span>#<span class="number">65</span>        <span spellcheck="true" class="comment">// print:(Ljava/lang/String;)V</span>
  #<span class="number">42</span> <span class="operator">=</span> Class              #<span class="number">66</span>            <span spellcheck="true" class="comment">// java/lang/Integer</span>
  #<span class="number">43</span> <span class="operator">=</span> NameAndType        #<span class="number">67</span><span class="punctuation">:</span>#<span class="number">68</span>        <span spellcheck="true" class="comment">// parseInt:(Ljava/lang/String;)I</span>
  #<span class="number">44</span> <span class="operator">=</span> NameAndType        #<span class="number">69</span><span class="punctuation">:</span>#<span class="number">70</span>        <span spellcheck="true" class="comment">// currentTimeMillis:()J</span>
  #<span class="number">45</span> <span class="operator">=</span> Utf8               Fibonacci <span class="keyword">from</span> <span class="number">1</span> to <span class="operator">%</span>s<span class="punctuation">:</span>\n
  #<span class="number">46</span> <span class="operator">=</span> Utf8               java<span class="operator">/</span>lang<span class="operator">/</span>Object
  #<span class="number">47</span> <span class="operator">=</span> NameAndType        #<span class="number">71</span><span class="punctuation">:</span>#<span class="number">72</span>        <span spellcheck="true" class="comment">// valueOf:(I)Ljava/lang/Integer;</span>
  #<span class="number">48</span> <span class="operator">=</span> NameAndType        #<span class="number">73</span><span class="punctuation">:</span>#<span class="number">74</span>        <span spellcheck="true" class="comment">// format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/io/PrintStream;</span>
  #<span class="number">49</span> <span class="operator">=</span> Utf8               java<span class="operator">/</span>lang<span class="operator">/</span>StringBuilder
  #<span class="number">50</span> <span class="operator">=</span> NameAndType        #<span class="number">75</span><span class="punctuation">:</span>#<span class="number">76</span>        <span spellcheck="true" class="comment">// append:(I)Ljava/lang/StringBuilder;</span>
  #<span class="number">51</span> <span class="operator">=</span> Utf8               <span class="punctuation">:</span>
  #<span class="number">52</span> <span class="operator">=</span> NameAndType        #<span class="number">75</span><span class="punctuation">:</span>#<span class="number">77</span>        <span spellcheck="true" class="comment">// append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span>
  #<span class="number">53</span> <span class="operator">=</span> NameAndType        #<span class="number">75</span><span class="punctuation">:</span>#<span class="number">78</span>        <span spellcheck="true" class="comment">// append:(J)Ljava/lang/StringBuilder;</span>
  #<span class="number">54</span> <span class="operator">=</span> NameAndType        #<span class="number">79</span><span class="punctuation">:</span>#<span class="number">80</span>        <span spellcheck="true" class="comment">// toString:()Ljava/lang/String;</span>
  #<span class="number">55</span> <span class="operator">=</span> NameAndType        #<span class="number">81</span><span class="punctuation">:</span>#<span class="number">65</span>        <span spellcheck="true" class="comment">// println:(Ljava/lang/String;)V</span>
  #<span class="number">56</span> <span class="operator">=</span> Utf8               time<span class="punctuation">:</span>
  #<span class="number">57</span> <span class="operator">=</span> Utf8               ms
  #<span class="number">58</span> <span class="operator">=</span> Utf8               done<span class="punctuation">.</span>
  #<span class="number">59</span> <span class="operator">=</span> Utf8               Main
  #<span class="number">60</span> <span class="operator">=</span> Utf8               java<span class="operator">/</span>lang<span class="operator">/</span>System
  #<span class="number">61</span> <span class="operator">=</span> Utf8               out
  #<span class="number">62</span> <span class="operator">=</span> Utf8               Ljava<span class="operator">/</span>io<span class="operator">/</span>PrintStream<span class="punctuation">;</span>
  #<span class="number">63</span> <span class="operator">=</span> Utf8               java<span class="operator">/</span>io<span class="operator">/</span>PrintStream
  #<span class="number">64</span> <span class="operator">=</span> Utf8               print
  #<span class="number">65</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>String<span class="punctuation">;</span><span class="punctuation">)</span>V
  #<span class="number">66</span> <span class="operator">=</span> Utf8               java<span class="operator">/</span>lang<span class="operator">/</span>Integer
  #<span class="number">67</span> <span class="operator">=</span> Utf8               parseInt
  #<span class="number">68</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>String<span class="punctuation">;</span><span class="punctuation">)</span>I
  #<span class="number">69</span> <span class="operator">=</span> Utf8               currentTimeMillis
  #<span class="number">70</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span><span class="punctuation">)</span>J
  #<span class="number">71</span> <span class="operator">=</span> Utf8               valueOf
  #<span class="number">72</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span>I<span class="punctuation">)</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>Integer<span class="punctuation">;</span>
  #<span class="number">73</span> <span class="operator">=</span> Utf8               format
  #<span class="number">74</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>String<span class="punctuation">;</span><span class="punctuation">[</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>Object<span class="punctuation">;</span><span class="punctuation">)</span>Ljava<span class="operator">/</span>io<span class="operator">/</span>PrintStream<span class="punctuation">;</span>
  #<span class="number">75</span> <span class="operator">=</span> Utf8               append
  #<span class="number">76</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span>I<span class="punctuation">)</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>StringBuilder<span class="punctuation">;</span>
  #<span class="number">77</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>String<span class="punctuation">;</span><span class="punctuation">)</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>StringBuilder<span class="punctuation">;</span>
  #<span class="number">78</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span>J<span class="punctuation">)</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>StringBuilder<span class="punctuation">;</span>
  #<span class="number">79</span> <span class="operator">=</span> Utf8               toString
  #<span class="number">80</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span><span class="punctuation">)</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>String<span class="punctuation">;</span>
  #<span class="number">81</span> <span class="operator">=</span> Utf8               println
<span class="punctuation">{</span>
  <span class="keyword">public</span> <span class="function">Main</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
    descriptor<span class="punctuation">:</span> <span class="punctuation">(</span><span class="punctuation">)</span>V
    flags<span class="punctuation">:</span> ACC_PUBLIC
    Code<span class="punctuation">:</span>
      stack<span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span> locals<span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span> args_size<span class="operator">=</span><span class="number">1</span>
         <span class="number">0</span><span class="punctuation">:</span> aload_0
         <span class="number">1</span><span class="punctuation">:</span> invokespecial #<span class="number">1</span>                  <span spellcheck="true" class="comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span>
         <span class="number">4</span><span class="punctuation">:</span> <span class="keyword">return</span>
      LineNumberTable<span class="punctuation">:</span>
        line <span class="number">1</span><span class="punctuation">:</span> <span class="number">0</span>

  <span class="keyword">public</span> <span class="keyword">static</span> long <span class="function">fib</span><span class="punctuation">(</span>int<span class="punctuation">)</span><span class="punctuation">;</span>
    descriptor<span class="punctuation">:</span> <span class="punctuation">(</span>I<span class="punctuation">)</span>J
    flags<span class="punctuation">:</span> ACC_PUBLIC<span class="punctuation">,</span> ACC_STATIC
    Code<span class="punctuation">:</span>
      stack<span class="operator">=</span><span class="number">4</span><span class="punctuation">,</span> locals<span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span> args_size<span class="operator">=</span><span class="number">1</span>
         <span class="number">0</span><span class="punctuation">:</span> iload_0
         <span class="number">1</span><span class="punctuation">:</span> iconst_1
         <span class="number">2</span><span class="punctuation">:</span> if_icmpgt     <span class="number">8</span>
         <span class="number">5</span><span class="punctuation">:</span> iload_0
         <span class="number">6</span><span class="punctuation">:</span> i2l
         <span class="number">7</span><span class="punctuation">:</span> lreturn
         <span class="number">8</span><span class="punctuation">:</span> iload_0
         <span class="number">9</span><span class="punctuation">:</span> iconst_1
        <span class="number">10</span><span class="punctuation">:</span> isub
        <span class="number">11</span><span class="punctuation">:</span> invokestatic  #<span class="number">2</span>                  <span spellcheck="true" class="comment">// Method fib:(I)J</span>
        <span class="number">14</span><span class="punctuation">:</span> iload_0
        <span class="number">15</span><span class="punctuation">:</span> iconst_2
        <span class="number">16</span><span class="punctuation">:</span> isub
        <span class="number">17</span><span class="punctuation">:</span> invokestatic  #<span class="number">2</span>                  <span spellcheck="true" class="comment">// Method fib:(I)J</span>
        <span class="number">20</span><span class="punctuation">:</span> ladd
        <span class="number">21</span><span class="punctuation">:</span> lreturn
      LineNumberTable<span class="punctuation">:</span>
        line <span class="number">4</span><span class="punctuation">:</span> <span class="number">0</span>
        line <span class="number">5</span><span class="punctuation">:</span> <span class="number">5</span>
        line <span class="number">6</span><span class="punctuation">:</span> <span class="number">8</span>
      StackMapTable<span class="punctuation">:</span> number_of_entries <span class="operator">=</span> <span class="number">1</span>
        frame_type <span class="operator">=</span> <span class="number">8</span> <span spellcheck="true" class="comment">/* same */</span>

  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="function">main</span><span class="punctuation">(</span>java<span class="punctuation">.</span>lang<span class="punctuation">.</span>String<span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">;</span>
    descriptor<span class="punctuation">:</span> <span class="punctuation">(</span><span class="punctuation">[</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>String<span class="punctuation">;</span><span class="punctuation">)</span>V
    flags<span class="punctuation">:</span> ACC_PUBLIC<span class="punctuation">,</span> ACC_STATIC
    Code<span class="punctuation">:</span>
      stack<span class="operator">=</span><span class="number">6</span><span class="punctuation">,</span> locals<span class="operator">=</span><span class="number">6</span><span class="punctuation">,</span> args_size<span class="operator">=</span><span class="number">1</span>
         <span class="number">0</span><span class="punctuation">:</span> aload_0
         <span class="number">1</span><span class="punctuation">:</span> arraylength
         <span class="number">2</span><span class="punctuation">:</span> ifne          <span class="number">14</span>
         <span class="number">5</span><span class="punctuation">:</span> getstatic     #<span class="number">3</span>                  <span spellcheck="true" class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span>
         <span class="number">8</span><span class="punctuation">:</span> ldc           #<span class="number">4</span>                  <span spellcheck="true" class="comment">// String help: java Fibonacci {Number}</span>
        <span class="number">10</span><span class="punctuation">:</span> invokevirtual #<span class="number">5</span>                  <span spellcheck="true" class="comment">// Method java/io/PrintStream.print:(Ljava/lang/String;)V</span>
        <span class="number">13</span><span class="punctuation">:</span> <span class="keyword">return</span>
        <span class="number">14</span><span class="punctuation">:</span> aload_0
        <span class="number">15</span><span class="punctuation">:</span> iconst_0
        <span class="number">16</span><span class="punctuation">:</span> aaload
        <span class="number">17</span><span class="punctuation">:</span> invokestatic  #<span class="number">6</span>                  <span spellcheck="true" class="comment">// Method java/lang/Integer.parseInt:(Ljava/lang/String;)I</span>
        <span class="number">20</span><span class="punctuation">:</span> istore_1
        <span class="number">21</span><span class="punctuation">:</span> invokestatic  #<span class="number">7</span>                  <span spellcheck="true" class="comment">// Method java/lang/System.currentTimeMillis:()J</span>
        <span class="number">24</span><span class="punctuation">:</span> lstore_2
        <span class="number">25</span><span class="punctuation">:</span> getstatic     #<span class="number">3</span>                  <span spellcheck="true" class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span>
        <span class="number">28</span><span class="punctuation">:</span> ldc           #<span class="number">8</span>                  <span spellcheck="true" class="comment">// String Fibonacci from 1 to %s:\n</span>
        <span class="number">30</span><span class="punctuation">:</span> iconst_1
        <span class="number">31</span><span class="punctuation">:</span> anewarray     #<span class="number">9</span>                  <span spellcheck="true" class="comment">// class java/lang/Object</span>
        <span class="number">34</span><span class="punctuation">:</span> dup
        <span class="number">35</span><span class="punctuation">:</span> iconst_0
        <span class="number">36</span><span class="punctuation">:</span> iload_1
        <span class="number">37</span><span class="punctuation">:</span> invokestatic  #<span class="number">10</span>                 <span spellcheck="true" class="comment">// Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;</span>
        <span class="number">40</span><span class="punctuation">:</span> aastore
        <span class="number">41</span><span class="punctuation">:</span> invokevirtual #<span class="number">11</span>                 <span spellcheck="true" class="comment">// Method java/io/PrintStream.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/io/PrintStream;</span>
        <span class="number">44</span><span class="punctuation">:</span> pop
        <span class="number">45</span><span class="punctuation">:</span> iconst_1
        <span class="number">46</span><span class="punctuation">:</span> istore        <span class="number">4</span>
        <span class="number">48</span><span class="punctuation">:</span> iload         <span class="number">4</span>
        <span class="number">50</span><span class="punctuation">:</span> iload_1
        <span class="number">51</span><span class="punctuation">:</span> if_icmpgt     <span class="number">94</span>
        <span class="number">54</span><span class="punctuation">:</span> getstatic     #<span class="number">3</span>                  <span spellcheck="true" class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span>
        <span class="number">57</span><span class="punctuation">:</span> <span class="keyword">new</span>           #<span class="number">12</span>                 <span spellcheck="true" class="comment">// class java/lang/StringBuilder</span>
        <span class="number">60</span><span class="punctuation">:</span> dup
        <span class="number">61</span><span class="punctuation">:</span> invokespecial #<span class="number">13</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V</span>
        <span class="number">64</span><span class="punctuation">:</span> iload         <span class="number">4</span>
        <span class="number">66</span><span class="punctuation">:</span> invokevirtual #<span class="number">14</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;</span>
        <span class="number">69</span><span class="punctuation">:</span> ldc           #<span class="number">15</span>                 <span spellcheck="true" class="comment">// String :</span>
        <span class="number">71</span><span class="punctuation">:</span> invokevirtual #<span class="number">16</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span>
        <span class="number">74</span><span class="punctuation">:</span> iload         <span class="number">4</span>
        <span class="number">76</span><span class="punctuation">:</span> invokestatic  #<span class="number">2</span>                  <span spellcheck="true" class="comment">// Method fib:(I)J</span>
        <span class="number">79</span><span class="punctuation">:</span> invokevirtual #<span class="number">17</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;</span>
        <span class="number">82</span><span class="punctuation">:</span> invokevirtual #<span class="number">18</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.toString:()Ljava/lang/String;</span>
        <span class="number">85</span><span class="punctuation">:</span> invokevirtual #<span class="number">19</span>                 <span spellcheck="true" class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span>
        <span class="number">88</span><span class="punctuation">:</span> iinc          <span class="number">4</span><span class="punctuation">,</span> <span class="number">1</span>
        <span class="number">91</span><span class="punctuation">:</span> goto          <span class="number">48</span>
        <span class="number">94</span><span class="punctuation">:</span> invokestatic  #<span class="number">7</span>                  <span spellcheck="true" class="comment">// Method java/lang/System.currentTimeMillis:()J</span>
        <span class="number">97</span><span class="punctuation">:</span> lstore        <span class="number">4</span>
        <span class="number">99</span><span class="punctuation">:</span> getstatic     #<span class="number">3</span>                  <span spellcheck="true" class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span>
       <span class="number">102</span><span class="punctuation">:</span> <span class="keyword">new</span>           #<span class="number">12</span>                 <span spellcheck="true" class="comment">// class java/lang/StringBuilder</span>
       <span class="number">105</span><span class="punctuation">:</span> dup
       <span class="number">106</span><span class="punctuation">:</span> invokespecial #<span class="number">13</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V</span>
       <span class="number">109</span><span class="punctuation">:</span> ldc           #<span class="number">20</span>                 <span spellcheck="true" class="comment">// String time:</span>
       <span class="number">111</span><span class="punctuation">:</span> invokevirtual #<span class="number">16</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span>
       <span class="number">114</span><span class="punctuation">:</span> lload         <span class="number">4</span>
       <span class="number">116</span><span class="punctuation">:</span> lload_2
       <span class="number">117</span><span class="punctuation">:</span> lsub
       <span class="number">118</span><span class="punctuation">:</span> invokevirtual #<span class="number">17</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;</span>
       <span class="number">121</span><span class="punctuation">:</span> ldc           #<span class="number">21</span>                 <span spellcheck="true" class="comment">// String ms</span>
       <span class="number">123</span><span class="punctuation">:</span> invokevirtual #<span class="number">16</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span>
       <span class="number">126</span><span class="punctuation">:</span> invokevirtual #<span class="number">18</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.toString:()Ljava/lang/String;</span>
       <span class="number">129</span><span class="punctuation">:</span> invokevirtual #<span class="number">19</span>                 <span spellcheck="true" class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span>
       <span class="number">132</span><span class="punctuation">:</span> getstatic     #<span class="number">3</span>                  <span spellcheck="true" class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span>
       <span class="number">135</span><span class="punctuation">:</span> ldc           #<span class="number">22</span>                 <span spellcheck="true" class="comment">// String done.</span>
       <span class="number">137</span><span class="punctuation">:</span> invokevirtual #<span class="number">19</span>                 <span spellcheck="true" class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span>
       <span class="number">140</span><span class="punctuation">:</span> <span class="keyword">return</span>
      LineNumberTable<span class="punctuation">:</span>
        line <span class="number">10</span><span class="punctuation">:</span> <span class="number">0</span>
        line <span class="number">11</span><span class="punctuation">:</span> <span class="number">5</span>
        line <span class="number">12</span><span class="punctuation">:</span> <span class="number">13</span>
        line <span class="number">15</span><span class="punctuation">:</span> <span class="number">14</span>
        line <span class="number">17</span><span class="punctuation">:</span> <span class="number">21</span>
        line <span class="number">18</span><span class="punctuation">:</span> <span class="number">25</span>
        line <span class="number">19</span><span class="punctuation">:</span> <span class="number">45</span>
        line <span class="number">20</span><span class="punctuation">:</span> <span class="number">54</span>
        line <span class="number">19</span><span class="punctuation">:</span> <span class="number">88</span>
        line <span class="number">22</span><span class="punctuation">:</span> <span class="number">94</span>
        line <span class="number">23</span><span class="punctuation">:</span> <span class="number">99</span>
        line <span class="number">25</span><span class="punctuation">:</span> <span class="number">132</span>
        line <span class="number">26</span><span class="punctuation">:</span> <span class="number">140</span>
      StackMapTable<span class="punctuation">:</span> number_of_entries <span class="operator">=</span> <span class="number">3</span>
        frame_type <span class="operator">=</span> <span class="number">14</span> <span spellcheck="true" class="comment">/* same */</span>
        frame_type <span class="operator">=</span> <span class="number">254</span> <span spellcheck="true" class="comment">/* append */</span>
          offset_delta <span class="operator">=</span> <span class="number">33</span>
          locals <span class="operator">=</span> <span class="punctuation">[</span> int<span class="punctuation">,</span> long<span class="punctuation">,</span> int <span class="punctuation">]</span>
        frame_type <span class="operator">=</span> <span class="number">250</span> <span spellcheck="true" class="comment">/* chop */</span>
          offset_delta <span class="operator">=</span> <span class="number">45</span>
<span class="punctuation">}</span>
SourceFile<span class="punctuation">:</span> <span class="string">&quot;Main.java&quot;</span></pre><p>那么，首先，我们看到的是对于java文件信息的一些标识、本文件的版本信息等信息，这些不是很重要，所以省略。
我们重点来说说该处的常量池。</p><pre class="prism language-undefined">#<span class="number">1</span> <span class="operator">=</span> Methodref          #<span class="number">9</span><span class="punctuation">.</span>#<span class="number">35</span>         <span spellcheck="true" class="comment">// java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></pre><p><code>#1</code>主要表示的是常量池的程序计数器（从1开始的），Methodref 表示的是用于记录方法信息 从#9 计数器进入 #35处被调用。而下面的</p><pre class="prism language-undefined"><span class="punctuation">{</span>
  <span class="keyword">public</span> <span class="function">Main</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
    descriptor<span class="punctuation">:</span> <span class="punctuation">(</span><span class="punctuation">)</span>V
    flags<span class="punctuation">:</span> ACC_PUBLIC
    Code<span class="punctuation">:</span>
      stack<span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span> locals<span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span> args_size<span class="operator">=</span><span class="number">1</span>
         <span class="number">0</span><span class="punctuation">:</span> aload_0
         <span class="number">1</span><span class="punctuation">:</span> invokespecial #<span class="number">1</span>                  <span spellcheck="true" class="comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span>
         <span class="number">4</span><span class="punctuation">:</span> <span class="keyword">return</span>
      LineNumberTable<span class="punctuation">:</span>
        line <span class="number">1</span><span class="punctuation">:</span> <span class="number">0</span>
<span class="punctuation">.</span><span class="punctuation">.</span><span class="punctuation">.</span></pre><p>表示的是类名、方法名，descriptor用来区分是类还是方法，flags 来表示方法是什么样的类型，code则是代码段， LineNumberTable 表示的是这个方法在原java的第几行。
那么我们着重分析一下</p><pre class="prism language-undefined">         <span class="number">0</span><span class="punctuation">:</span> aload_0
         <span class="number">1</span><span class="punctuation">:</span> invokespecial #<span class="number">1</span>                  <span spellcheck="true" class="comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span>
         <span class="number">4</span><span class="punctuation">:</span> <span class="keyword">return</span></pre><p>上面的三条指令：</p><p>aload_0:这个操作码是aload格式操作码中的一个。它们用来把对象引用加载到操作码栈。 表示正在被访问的局部变量数组的位置，但只能是0、1、2、3 中的一个。还有一些其它类似的操作码用来载入非对象引用的数据，如iload, lload, float 和 dload。其中 i 表示 int，l 表示 long，f 表示 float，d 表示 double。局部变量数组位置大于 3 的局部变量可以用 iload, lload, float, dload 和 aload 载入。这些操作码都只需要一个操作数，即数组中的位置。
invokespecial:这些操作码属于一组函数调用的操作码，包括：invokedynamic、invokeinterface、invokespecial、invokestatic、invokevirtual。在这个 class 文件中，invokespecial 和 invokevirutal 两个指令都用到了，两者的区别是，invokevirutal 指令调用一个对象的实例方法，invokespecial 指令调用实例初始化方法、私有方法、父类方法。
return：这个操作码属于ireturn、lreturn、freturn、dreturn、areturn 和 return 操作码组。每个操作码返回一种类型的返回值，其中 i 表示 int，l 表示 long，f 表示 float，d 表示 double，a 表示 对象引用。没有前缀类型字母的 return 表示返回 void。
对于上述的指令，都会有操作数栈来进行配合。如果操作数没用完则return ，则等待系统进行垃圾回收。若用完未取到则会跑出异常。
详细的指令信息可以在：<a href="https://docs.oracle.com/javase/specs/jvms/se7/html/index.html">https://docs.oracle.com/javase/specs/jvms/se7/html/index.html</a>  中见到</p><p>通过上述对于class类的简要分析，我们对jvm class文件有了一定的了解。接下来将讲述详细的内容以及如何去应用。</p></div></div><div class="inner-content"><h1><a href="/blog/java-jvm/">浅谈 node-jvm(1)</a></h1><p>2018-5-14 by MartinDelophy</p><hr/><div><p>前不久，在github不小心看到了一个node-jvm 不由得惊叹，node竟然也能写出jvm，故clone了一波来看看到底是何方神圣。
地址:<a href="https://github.com/YaroslavGaponov/node-jvm">https://github.com/YaroslavGaponov/node-jvm</a></p><p>首先那肯定是看一下官方案例的，官方主要是用fibonacci.js 来new了一个jvm，然后设定日志等级，载入class文件，设定异步事件，就开始执行了。感觉很ok</p><p>那么，我们先看看它jvm地方的源码吧，首先，看到的是这句话,无用的代码暂时省略</p><pre class="prism language-undefined"><span class="keyword">var</span> JVM <span class="operator">=</span> module<span class="punctuation">.</span>exports <span class="operator">=</span> <span class="keyword">function</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">if</span> <span class="punctuation">(</span><span class="keyword">this</span> <span class="keyword">instanceof</span> <span class="class-name">JVM</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        JVM<span class="punctuation">.</span>super_<span class="punctuation">.</span><span class="function">call</span><span class="punctuation">(</span><span class="keyword">this</span><span class="punctuation">)</span><span class="punctuation">;</span>
        THREADS<span class="punctuation">.</span><span class="function">add</span><span class="punctuation">(</span><span class="keyword">new</span> <span class="class-name">Thread</span><span class="punctuation">(</span><span class="string">&quot;main&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>

        <span class="keyword">this</span><span class="punctuation">.</span>entryPoint <span class="operator">=</span> <span class="punctuation">{</span>
            className<span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span>
            methodName<span class="punctuation">:</span> <span class="string">&quot;main&quot;</span>
        <span class="punctuation">}</span><span class="punctuation">;</span>
    <span class="punctuation">}</span> <span class="keyword">else</span> <span class="punctuation">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> <span class="class-name">JVM</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p>代码很直观，我们可以看到一开始，如果该对象是通过jvm new出来的对象就进行入 JVM.super_.call这句话中，如果不是则 new 一下返回。</p><p>这几个地方还是比较容易理解的，除了这句 JVM.super<em>.call，我翻遍了代码，但是却没有找到这个super</em> 方法,那么这个super_  方法是哪里来的呢？
幸运的是，另外一句话也同样引起了我的注意</p><pre class="prism language-undefined"><span class="keyword">var</span> util <span class="operator">=</span> <span class="function">require</span><span class="punctuation">(</span><span class="string">&quot;util&quot;</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">var</span> EE <span class="operator">=</span> <span class="function">require</span><span class="punctuation">(</span><span class="string">&quot;events&quot;</span><span class="punctuation">)</span><span class="punctuation">.</span>EventEmitter<span class="punctuation">;</span>
util<span class="punctuation">.</span><span class="function">inherits</span><span class="punctuation">(</span>JVM<span class="punctuation">,</span> EE<span class="punctuation">)</span><span class="punctuation">;</span></pre><p>util.inherits指的是将 require(&quot;events&quot;).EventEmitter 方法继承到JVM中,那么super_ 从哪里来的呢，我们还是不知道，通过 这篇blog的帮助(<a href="https://www.cnblogs.com/youlechang123/p/5602335.html),我们看到了一段代码">https://www.cnblogs.com/youlechang123/p/5602335.html),我们看到了一段代码</a></p><pre class="prism language-undefined">exports<span class="punctuation">.</span>inherits <span class="operator">=</span> <span class="keyword">function</span><span class="punctuation">(</span>ctor<span class="punctuation">,</span> superCtor<span class="punctuation">)</span> <span class="punctuation">{</span>
 ctor<span class="punctuation">.</span>super_ <span class="operator">=</span> superCtor<span class="punctuation">;</span>
 ctor<span class="punctuation">.</span>prototype <span class="operator">=</span> Object<span class="punctuation">.</span><span class="function">create</span><span class="punctuation">(</span>superCtor<span class="punctuation">.</span>prototype<span class="punctuation">,</span> <span class="punctuation">{</span>
 constructor<span class="punctuation">:</span> <span class="punctuation">{</span>
  value<span class="punctuation">:</span> ctor<span class="punctuation">,</span>
  enumerable<span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span>
  writable<span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span>
  configurable<span class="punctuation">:</span> <span class="keyword">true</span>
 <span class="punctuation">}</span>
 <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="punctuation">}</span><span class="punctuation">;</span></pre><p>这下，我恍然大悟，原来JVM.super_ 不仅这样出来，而且其中存放的是 EventEmitter 这个函数,并且在prototype中存放了 EventEmitter的原型，也就是说JVM可以获得EventEmitter中的所有方法，这也就可以解释了为什么JVM new出之后可以设定异步事件。</p><p>node-jvm 是一个比较庞大的部分，今天先分析到这里，在下一章中我会告诉大家一个有效的工具。</p></div></div><div class="inner-content"><h1><a href="/blog/java-annotation/">java 注解</a></h1><p>2017-5-13 by MartinDelophy</p><hr/><div><p>从读研开始做OA项目一晃将近半年了，一直在用到java方面的注解，愚钝的我直到现在才开始考虑到如何自定义注解，从网上看到了一个好例子，分享出来给需要帮助的人使用。</p><p>那么首先我们先做一个接口，这个接口的作用是作为注解引用的，里面做了一个枚举类型，定义了一个Tt()方法，默认值为C</p><pre class="prism language-undefined">@<span class="function">Target</span><span class="punctuation">(</span>ElementType<span class="punctuation">.</span>FIELD<span class="punctuation">)</span>  
@<span class="function">Retention</span><span class="punctuation">(</span>RetentionPolicy<span class="punctuation">.</span>RUNTIME<span class="punctuation">)</span>  
@Inherited  
@Documented  
<span class="keyword">public</span> @<span class="keyword">interface</span> <span class="class-name">test</span> <span class="punctuation">{</span>
  <span class="keyword">public</span> <span class="keyword">enum</span> T<span class="punctuation">{</span> A<span class="punctuation">,</span>B<span class="punctuation">,</span>C<span class="punctuation">}</span><span class="punctuation">;</span>
      T  <span class="function">Tt</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="keyword">default</span> T<span class="punctuation">.</span>C<span class="punctuation">;</span> 
<span class="punctuation">}</span></pre><p>之后我们定义了一个 test2的类，外加一个主函数目的很简单，就是为了让test3去读我们test2的class类</p><pre class="prism language-undefined"><span class="keyword">public</span> <span class="keyword">class</span> <span class="class-name">test2</span> <span class="punctuation">{</span>
    @<span class="function">test</span><span class="punctuation">(</span>Tt<span class="operator">=</span> test<span class="punctuation">.</span>T<span class="punctuation">.</span>C<span class="punctuation">)</span>
    <span class="keyword">private</span> String t<span class="punctuation">;</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="function">main</span><span class="punctuation">(</span>String<span class="punctuation">[</span><span class="punctuation">]</span> args<span class="punctuation">)</span> <span class="punctuation">{</span>
                test3<span class="punctuation">.</span><span class="function">gettest</span><span class="punctuation">(</span>test2<span class="punctuation">.</span><span class="keyword">class</span><span class="punctuation">)</span><span class="punctuation">;</span>
          <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p>test3就是看test2的类中有没有test注解，有的话就是输出来看看</p><pre class="prism language-undefined"><span class="keyword">public</span> <span class="keyword">class</span> <span class="class-name">test3</span> <span class="punctuation">{</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="function">gettest</span><span class="punctuation">(</span>Class<span class="operator">&lt;</span><span class="operator">?</span><span class="operator">&gt;</span> clazz<span class="punctuation">)</span> <span class="punctuation">{</span>

             String str<span class="operator">=</span><span class="string">&quot;&quot;</span><span class="punctuation">;</span>

         Field<span class="punctuation">[</span><span class="punctuation">]</span> fields <span class="operator">=</span> clazz<span class="punctuation">.</span><span class="function">getDeclaredFields</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>

         <span class="keyword">for</span><span class="punctuation">(</span>Field field <span class="punctuation">:</span>fields<span class="punctuation">)</span> <span class="punctuation">{</span>

                <span class="keyword">if</span><span class="punctuation">(</span>field<span class="punctuation">.</span><span class="function">isAnnotationPresent</span><span class="punctuation">(</span>test<span class="punctuation">.</span><span class="keyword">class</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">{</span>

                  test t<span class="operator">=</span><span class="punctuation">(</span>test<span class="punctuation">)</span> field<span class="punctuation">.</span><span class="function">getAnnotation</span><span class="punctuation">(</span>test<span class="punctuation">.</span><span class="keyword">class</span><span class="punctuation">)</span><span class="punctuation">;</span>

                   str<span class="operator">=</span>str<span class="operator">+</span>t<span class="punctuation">.</span><span class="function">Tt</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>

                   System<span class="punctuation">.</span>out<span class="punctuation">.</span><span class="function">println</span><span class="punctuation">(</span>str<span class="punctuation">)</span><span class="punctuation">;</span>
        <span class="punctuation">}</span>
    <span class="punctuation">}</span>
  <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p>结果，控制台输出的是 C，因为一开始将枚举中，默认的C传入，再字符串拼接，显示</p></div></div></div><div class="nav-docs"><div class="nav-docs-section"><h3>Subscribe</h3><a rel="home" type="application/rss+xml" href="/blog/rss.xml">RSS</a></div><div class="nav-docs-section"><h3>Recent Posts</h3><ul><li><a href="/blog/java-backengineering/">java 反向工程</a></li><li><a href="/blog/continous-publish/">持续发布项目</a></li><li><a href="/blog/model-engine/">java script 模版引擎初探</a></li><li><a href="/blog/java-jvm2/">浅谈 node-jvm(2)</a></li><li><a href="/blog/java-jvm/">浅谈 node-jvm(1)</a></li><li><a href="/blog/java-annotation/">java 注解</a></li></ul></div></div></div></section><footer><section><a class="footer-home" href="/">MartinDelophy powered by graphql.org</a></section></footer></body></html>        <canvas id="live2d" width="260" height="300" className="live_2d" style="position:fixed;right:0px;bottom:0px" /><script src="/static/js/live2d.min.js"></script><!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><title>Blog | MartinDelophy</title><meta name="viewport" content="width=640"/><link rel="stylesheet" href="/style.css"/></head><body><header><section><a class="nav-home" href="/">MartinDelophy</a><nav><a href="/blog">技术博客</a><a href="/#">个人简历</a><a href="/#">图标3</a><a href="/#" class="active">图标4</a><a href="/#">图标5</a></nav><div class="algolia-search-wrapper"><input type="text" id="algolia-search-input" placeholder="请搜索..."/></div></section></header><section><div class="documentationContent"><div><div class="inner-content"><h1><a href="/blog/java-backengineering/">java 反向工程</a></h1><p>2018-7-13 by MartinDelophy</p><hr/><div><p>java 反向工程主要是通过将数据库中的表反向映射成java实体类和Repository文件，能够减轻开发者开发的困难。
这个项目主要是一年前实现的，在这里也就不详细解释了。
项目地址：<a href="https://github.com/MartinDelophy/javaBackEngineering">https://github.com/MartinDelophy/javaBackEngineering</a></p></div></div><div class="inner-content"><h1><a href="/blog/continous-publish/">持续发布项目</a></h1><p>2018-7-12 by MartinDelophy</p><hr/><div><p><code>序言</code>：一晃做厦门海洋经济运行监测系统已经很长一段时间了，总的来说，收获颇多，接下来会陆续发布几篇博客来对这个项目收获到的经验来做一定的整理。</p><p>那么今天，我们主要来谈谈什么是持续发布。</p><p>发布：顾名思义就是将我们的代码打包后运行在我们的服务器上，能够让人们看到这个项目。
持续发布：那就是阶段性的发布到服务器上，能够给予用户较好的体验。</p><h3><a class="anchor" name=""></a>为什么要这么做？ <a class="hash-link" href="#">#</a></h3><p>原因很简单，1.用户有时并不能明确自己需要的是什么。2.你有时未必正确理解了用户的想法。那么以上两点原因直接导致了你做的产品不一定满足了用户的需求，所以，需要持续性的部署才能，让用户有较好的体验。</p><p>通常，人们部署系统的方式是通过远程登陆的方案，然后将文件拷贝到某一个路径下，然后重新启动服务（这是一种比较low的方案）,好一点的方案便是用jenkins这类工具集成、部署。但如果是在内网中，这样的方案时间开销也是巨大的。所以，今天，我来教大家一种持续发布的代码。</p><p>代码在:<a href="https://github.com/MartinDelophy/continousPublishOnWindows">https://github.com/MartinDelophy/continousPublishOnWindows</a>
可以看到，具体配置可以根据情况进行更改。</p><p>持续发布步骤说明：
1.通过net use指令来进行远成连接
2.复制文件到指定远程目录
3.设定schtasks来创建定时器（由于schtasks必须要设定启动时间，所以如果要立即执行，就要在这之后 run一下）启动远程脚本
4.启动远程脚本，运行项目</p><p>这样就实现了一键式的项目发布，很简单吧。</p></div></div><div class="inner-content"><h1><a href="/blog/model-engine/">java script 模版引擎初探</a></h1><p>2018-5-18 by MartinDelophy</p><hr/><div><p>模版引擎，众所周知就是将你需要绑定的值从后端传到前端，帮助用户解决变量预留的问题。</p><p>那么我的想法就是去构建一个模版引擎，帮助用户去解决这个问题。
那么，首先我们应该怎么做呢？
我的设计想法如下：</p><div><div width="100%" style="overflow-x: auto;"> 
<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="571" height="315" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[html->jsbox: bypass context
jsbox->js: extract value bypass value
js-jsbox: find value bind value
jsbox-html: find context bind context]]></source><desc></desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"></g><g class="actor"><path d="M10,20C36.3,22.4 37.4,17.6 70.7,20.0C69.0,44.0 72.4,26.8 70.7,62.5C56.2,64.9 53.0,60.1 10.0,62.5C8.3,30.2 11.7,52.3 10.0,20.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="20" y="44" style="font-size: 16px; font-family: danielbd;"><tspan x="20">html</tspan></text></g><g class="actor"><path d="M10,252.5C19.7,250.1 27.4,254.9 70.7,252.5C69.0,284.8 72.4,277.3 70.7,295.0C49.9,297.4 46.3,292.6 10.0,295.0C11.7,283.5 8.3,259.3 10.0,252.5" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="20" y="276.5" style="font-size: 16px; font-family: danielbd;"><tspan x="20">html</tspan></text></g><path d="M40.4,62.5C32.8,206.9 48.0,109.5 40.4,252.5" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="actor"><path d="M246.109375,20C272.3,22.6 292.8,17.4 310.3,20.0C308.6,47.1 312.0,45.3 310.3,62.5C268.7,65.1 272.9,59.9 246.1,62.5C247.8,54.1 244.4,29.6 246.1,20.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="257.34375" y="44" style="font-size: 16px; font-family: danielbd;"><tspan x="256.109375">jsbox</tspan></text></g><g class="actor"><path d="M246.109375,252.5C287.1,249.9 256.4,255.1 310.3,252.5C312.0,288.2 308.6,274.2 310.3,295.0C257.1,292.4 261.5,297.6 246.1,295.0C244.4,272.3 247.8,284.1 246.1,252.5" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="257.34375" y="276.5" style="font-size: 16px; font-family: danielbd;"><tspan x="256.109375">jsbox</tspan></text></g><path d="M278.2,62.5C270.6,191.2 285.8,193.9 278.2,252.5" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="actor"><path d="M506.984375,20C515.4,21.4 517.8,18.6 541.9,20.0C543.6,30.0 540.2,30.2 541.9,62.5C515.4,61.1 517.3,63.9 507.0,62.5C505.3,26.8 508.7,52.2 507.0,20.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="518.21875" y="44" style="font-size: 16px; font-family: danielbd;"><tspan x="516.984375">js</tspan></text></g><g class="actor"><path d="M506.984375,252.5C535.0,253.9 520.0,251.1 541.9,252.5C540.2,262.7 543.6,268.6 541.9,295.0C526.9,293.6 524.4,296.4 507.0,295.0C505.3,259.3 508.7,277.1 507.0,252.5" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="518.21875" y="276.5" style="font-size: 16px; font-family: danielbd;"><tspan x="516.984375">js</tspan></text></g><path d="M524.5,62.5C516.9,165.2 532.1,114.0 524.5,252.5" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="signal"><text x="95.6328125" y="90.25" style="font-size: 16px; font-family: danielbd;"><tspan x="95.6328125">bypass context</tspan></text><path d="M40.4,105.0C163.7,114.5 78.4,95.5 278.2,105.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="288.2265625" y="132.75" style="font-size: 16px; font-family: danielbd;"><tspan x="288.2265625">extract value bypass value</tspan></text><path d="M278.2,147.5C326.4,137.7 337.3,157.3 524.5,147.5" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="313.5625" y="175.25" style="font-size: 16px; font-family: danielbd;"><tspan x="313.5625">find value bind value</tspan></text><path d="M524.5,190.0C458.0,199.8 337.3,180.2 278.2,190.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="50.3671875" y="217.75" style="font-size: 16px; font-family: danielbd;"><tspan x="50.3671875">find context bind context</tspan></text><path d="M278.2,232.5C203.6,242.0 97.5,223.0 40.4,232.5" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g></svg>
</div>


</div><p>首先，将html的整个内容塞到 jsbox 中，之后将内容中的有效绑定字段进行提取，传到后端，解析字段。
通过后端拿到相应的字段的值，绑定之后推到jsbox中，在将jsbox中的内容推到前端进行渲染。</p><p>为了验证这个想法，我写了一个demo，地址在：<a href="https://github.com/MartinDelophy/narko">https://github.com/MartinDelophy/narko</a>
相应的demo在test文件夹中，可以通过npm install 来对本模版引擎进行安装。
当然，这个模版有很多的地方需要改进，比如多网页模版，组建生命周期，双向绑定。</p></div></div><div class="inner-content"><h1><a href="/blog/java-jvm2/">浅谈 node-jvm(2)</a></h1><p>2018-5-15 by MartinDelophy</p><hr/><div><p>上回，我们很简单的对node-jvm进行了一定的分析，但问题还是停留在表面，仅仅只是介绍了node 里面的一些特点，和java并无很多的关系，今天让我们接着来讲后续的内容。
要想很清晰的知道后续的内容，我们首先要对java class类文件做一定的了解。
我想在网上这样的文章算是比较多了，我推荐几个链接可以去看看
1.<a href="https://blog.csdn.net/u010425776/article/details/51245055">https://blog.csdn.net/u010425776/article/details/51245055</a>
2.<a href="https://www.cnblogs.com/Qian123/p/5707562.html">https://www.cnblogs.com/Qian123/p/5707562.html</a>
3.<a href="https://blog.csdn.net/u013309870/article/details/72975536">https://blog.csdn.net/u013309870/article/details/72975536</a>
4.<a href="http://www.blogjava.net/DLevin/archive/2011/09/05/358033.html">http://www.blogjava.net/DLevin/archive/2011/09/05/358033.html</a>
5.<a href="http://www.blogjava.net/DLevin/archive/2011/09/05/358034.html">http://www.blogjava.net/DLevin/archive/2011/09/05/358034.html</a></p><p>看了上面几个文章之后，我们开始实战来分析一下下面的代码
首先看到的是用来针对fib 进行计算的java文件</p><p>Main.java</p><pre class="prism language-undefined"><span class="keyword">public</span> <span class="keyword">class</span> <span class="class-name">Main</span> <span class="punctuation">{</span>

    <span class="keyword">public</span> <span class="keyword">static</span> long <span class="function">fib</span><span class="punctuation">(</span>int n<span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">if</span> <span class="punctuation">(</span>n <span class="operator">&lt;=</span> <span class="number">1</span><span class="punctuation">)</span>
            <span class="keyword">return</span> n<span class="punctuation">;</span>
        <span class="keyword">return</span> <span class="function">fib</span><span class="punctuation">(</span>n <span class="operator">-</span> <span class="number">1</span><span class="punctuation">)</span> <span class="operator">+</span> <span class="function">fib</span><span class="punctuation">(</span>n <span class="operator">-</span> <span class="number">2</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="function">main</span><span class="punctuation">(</span>String<span class="punctuation">[</span><span class="punctuation">]</span> args<span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">if</span> <span class="punctuation">(</span>args<span class="punctuation">.</span>length <span class="operator">==</span> <span class="number">0</span><span class="punctuation">)</span> <span class="punctuation">{</span>
            System<span class="punctuation">.</span>out<span class="punctuation">.</span><span class="function">print</span><span class="punctuation">(</span><span class="string">&quot;help: java Fibonacci {Number}&quot;</span><span class="punctuation">)</span><span class="punctuation">;</span>
            <span class="keyword">return</span><span class="punctuation">;</span>
        <span class="punctuation">}</span>

        int N <span class="operator">=</span> Integer<span class="punctuation">.</span><span class="function">parseInt</span><span class="punctuation">(</span>args<span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">;</span>

        long start <span class="operator">=</span> System<span class="punctuation">.</span><span class="function">currentTimeMillis</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
        System<span class="punctuation">.</span>out<span class="punctuation">.</span><span class="function">format</span><span class="punctuation">(</span><span class="string">&quot;Fibonacci from 1 to %s:\n&quot;</span><span class="punctuation">,</span> N<span class="punctuation">)</span><span class="punctuation">;</span>
        <span class="keyword">for</span> <span class="punctuation">(</span>int i <span class="operator">=</span> <span class="number">1</span><span class="punctuation">;</span> i <span class="operator">&lt;=</span> N<span class="punctuation">;</span> i<span class="operator">++</span><span class="punctuation">)</span> <span class="punctuation">{</span>
            System<span class="punctuation">.</span>out<span class="punctuation">.</span><span class="function">println</span><span class="punctuation">(</span>i <span class="operator">+</span> <span class="string">&quot;: &quot;</span> <span class="operator">+</span> <span class="function">fib</span><span class="punctuation">(</span>i<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
        <span class="punctuation">}</span>
        long stop <span class="operator">=</span> System<span class="punctuation">.</span><span class="function">currentTimeMillis</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
        System<span class="punctuation">.</span>out<span class="punctuation">.</span><span class="function">println</span><span class="punctuation">(</span><span class="string">&quot;time: &quot;</span> <span class="operator">+</span> <span class="punctuation">(</span>stop <span class="operator">-</span> start<span class="punctuation">)</span> <span class="operator">+</span> <span class="string">&quot;ms&quot;</span><span class="punctuation">)</span><span class="punctuation">;</span>

        System<span class="punctuation">.</span>out<span class="punctuation">.</span><span class="function">println</span><span class="punctuation">(</span><span class="string">&quot;done.&quot;</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p>该部分代码，主要是实现了最基本的fib 功能，并且调用。</p><p>那么接下来我用make 生成Main.class文件,然后通过
javap -v -verbose Main 分析一下改该类文件中的内容，内容如下：</p><pre class="prism language-undefined">Last modified May <span class="number">7</span><span class="punctuation">,</span> <span class="number">2018</span><span class="punctuation">;</span> size <span class="number">1286</span> bytes
  MD5 checksum 115352bb394b31575a6288f7bdf82f35
  Compiled <span class="keyword">from</span> <span class="string">&quot;Main.java&quot;</span>
<span class="keyword">public</span> <span class="keyword">class</span> <span class="class-name">Main</span>
  minor version<span class="punctuation">:</span> <span class="number">0</span>
  major version<span class="punctuation">:</span> <span class="number">52</span>
  flags<span class="punctuation">:</span> ACC_PUBLIC<span class="punctuation">,</span> ACC_SUPER
Constant pool<span class="punctuation">:</span>
   #<span class="number">1</span> <span class="operator">=</span> Methodref          #<span class="number">9</span><span class="punctuation">.</span>#<span class="number">35</span>         <span spellcheck="true" class="comment">// java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span>
   #<span class="number">2</span> <span class="operator">=</span> Methodref          #<span class="number">23</span><span class="punctuation">.</span>#<span class="number">36</span>        <span spellcheck="true" class="comment">// Main.fib:(I)J</span>
   #<span class="number">3</span> <span class="operator">=</span> Fieldref           #<span class="number">37</span><span class="punctuation">.</span>#<span class="number">38</span>        <span spellcheck="true" class="comment">// java/lang/System.out:Ljava/io/PrintStream;</span>
   #<span class="number">4</span> <span class="operator">=</span> String             #<span class="number">39</span>            <span spellcheck="true" class="comment">// help: java Fibonacci {Number}</span>
   #<span class="number">5</span> <span class="operator">=</span> Methodref          #<span class="number">40</span><span class="punctuation">.</span>#<span class="number">41</span>        <span spellcheck="true" class="comment">// java/io/PrintStream.print:(Ljava/lang/String;)V</span>
   #<span class="number">6</span> <span class="operator">=</span> Methodref          #<span class="number">42</span><span class="punctuation">.</span>#<span class="number">43</span>        <span spellcheck="true" class="comment">// java/lang/Integer.parseInt:(Ljava/lang/String;)I</span>
   #<span class="number">7</span> <span class="operator">=</span> Methodref          #<span class="number">37</span><span class="punctuation">.</span>#<span class="number">44</span>        <span spellcheck="true" class="comment">// java/lang/System.currentTimeMillis:()J</span>
   #<span class="number">8</span> <span class="operator">=</span> String             #<span class="number">45</span>            <span spellcheck="true" class="comment">// Fibonacci from 1 to %s:\n</span>
   #<span class="number">9</span> <span class="operator">=</span> Class              #<span class="number">46</span>            <span spellcheck="true" class="comment">// java/lang/Object</span>
  #<span class="number">10</span> <span class="operator">=</span> Methodref          #<span class="number">42</span><span class="punctuation">.</span>#<span class="number">47</span>        <span spellcheck="true" class="comment">// java/lang/Integer.valueOf:(I)Ljava/lang/Integer;</span>
  #<span class="number">11</span> <span class="operator">=</span> Methodref          #<span class="number">40</span><span class="punctuation">.</span>#<span class="number">48</span>        <span spellcheck="true" class="comment">// java/io/PrintStream.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/io/PrintStream;</span>
  #<span class="number">12</span> <span class="operator">=</span> Class              #<span class="number">49</span>            <span spellcheck="true" class="comment">// java/lang/StringBuilder</span>
  #<span class="number">13</span> <span class="operator">=</span> Methodref          #<span class="number">12</span><span class="punctuation">.</span>#<span class="number">35</span>        <span spellcheck="true" class="comment">// java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V</span>
  #<span class="number">14</span> <span class="operator">=</span> Methodref          #<span class="number">12</span><span class="punctuation">.</span>#<span class="number">50</span>        <span spellcheck="true" class="comment">// java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;</span>
  #<span class="number">15</span> <span class="operator">=</span> String             #<span class="number">51</span>            <span spellcheck="true" class="comment">// :</span>
  #<span class="number">16</span> <span class="operator">=</span> Methodref          #<span class="number">12</span><span class="punctuation">.</span>#<span class="number">52</span>        <span spellcheck="true" class="comment">// java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span>
  #<span class="number">17</span> <span class="operator">=</span> Methodref          #<span class="number">12</span><span class="punctuation">.</span>#<span class="number">53</span>        <span spellcheck="true" class="comment">// java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;</span>
  #<span class="number">18</span> <span class="operator">=</span> Methodref          #<span class="number">12</span><span class="punctuation">.</span>#<span class="number">54</span>        <span spellcheck="true" class="comment">// java/lang/StringBuilder.toString:()Ljava/lang/String;</span>
  #<span class="number">19</span> <span class="operator">=</span> Methodref          #<span class="number">40</span><span class="punctuation">.</span>#<span class="number">55</span>        <span spellcheck="true" class="comment">// java/io/PrintStream.println:(Ljava/lang/String;)V</span>
  #<span class="number">20</span> <span class="operator">=</span> String             #<span class="number">56</span>            <span spellcheck="true" class="comment">// time:</span>
  #<span class="number">21</span> <span class="operator">=</span> String             #<span class="number">57</span>            <span spellcheck="true" class="comment">// ms</span>
  #<span class="number">22</span> <span class="operator">=</span> String             #<span class="number">58</span>            <span spellcheck="true" class="comment">// done.</span>
  #<span class="number">23</span> <span class="operator">=</span> Class              #<span class="number">59</span>            <span spellcheck="true" class="comment">// Main</span>
  #<span class="number">24</span> <span class="operator">=</span> Utf8               <span class="operator">&lt;</span>init<span class="operator">&gt;</span>
  #<span class="number">25</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span><span class="punctuation">)</span>V
  #<span class="number">26</span> <span class="operator">=</span> Utf8               Code
  #<span class="number">27</span> <span class="operator">=</span> Utf8               LineNumberTable
  #<span class="number">28</span> <span class="operator">=</span> Utf8               fib
  #<span class="number">29</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span>I<span class="punctuation">)</span>J
  #<span class="number">30</span> <span class="operator">=</span> Utf8               StackMapTable
  #<span class="number">31</span> <span class="operator">=</span> Utf8               main
  #<span class="number">32</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span><span class="punctuation">[</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>String<span class="punctuation">;</span><span class="punctuation">)</span>V
  #<span class="number">33</span> <span class="operator">=</span> Utf8               SourceFile
  #<span class="number">34</span> <span class="operator">=</span> Utf8               Main<span class="punctuation">.</span>java
  #<span class="number">35</span> <span class="operator">=</span> NameAndType        #<span class="number">24</span><span class="punctuation">:</span>#<span class="number">25</span>        <span spellcheck="true" class="comment">// &quot;&lt;init&gt;&quot;:()V</span>
  #<span class="number">36</span> <span class="operator">=</span> NameAndType        #<span class="number">28</span><span class="punctuation">:</span>#<span class="number">29</span>        <span spellcheck="true" class="comment">// fib:(I)J</span>
  #<span class="number">37</span> <span class="operator">=</span> Class              #<span class="number">60</span>            <span spellcheck="true" class="comment">// java/lang/System</span>
  #<span class="number">38</span> <span class="operator">=</span> NameAndType        #<span class="number">61</span><span class="punctuation">:</span>#<span class="number">62</span>        <span spellcheck="true" class="comment">// out:Ljava/io/PrintStream;</span>
  #<span class="number">39</span> <span class="operator">=</span> Utf8               help<span class="punctuation">:</span> java Fibonacci <span class="punctuation">{</span>Number<span class="punctuation">}</span>
  #<span class="number">40</span> <span class="operator">=</span> Class              #<span class="number">63</span>            <span spellcheck="true" class="comment">// java/io/PrintStream</span>
  #<span class="number">41</span> <span class="operator">=</span> NameAndType        #<span class="number">64</span><span class="punctuation">:</span>#<span class="number">65</span>        <span spellcheck="true" class="comment">// print:(Ljava/lang/String;)V</span>
  #<span class="number">42</span> <span class="operator">=</span> Class              #<span class="number">66</span>            <span spellcheck="true" class="comment">// java/lang/Integer</span>
  #<span class="number">43</span> <span class="operator">=</span> NameAndType        #<span class="number">67</span><span class="punctuation">:</span>#<span class="number">68</span>        <span spellcheck="true" class="comment">// parseInt:(Ljava/lang/String;)I</span>
  #<span class="number">44</span> <span class="operator">=</span> NameAndType        #<span class="number">69</span><span class="punctuation">:</span>#<span class="number">70</span>        <span spellcheck="true" class="comment">// currentTimeMillis:()J</span>
  #<span class="number">45</span> <span class="operator">=</span> Utf8               Fibonacci <span class="keyword">from</span> <span class="number">1</span> to <span class="operator">%</span>s<span class="punctuation">:</span>\n
  #<span class="number">46</span> <span class="operator">=</span> Utf8               java<span class="operator">/</span>lang<span class="operator">/</span>Object
  #<span class="number">47</span> <span class="operator">=</span> NameAndType        #<span class="number">71</span><span class="punctuation">:</span>#<span class="number">72</span>        <span spellcheck="true" class="comment">// valueOf:(I)Ljava/lang/Integer;</span>
  #<span class="number">48</span> <span class="operator">=</span> NameAndType        #<span class="number">73</span><span class="punctuation">:</span>#<span class="number">74</span>        <span spellcheck="true" class="comment">// format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/io/PrintStream;</span>
  #<span class="number">49</span> <span class="operator">=</span> Utf8               java<span class="operator">/</span>lang<span class="operator">/</span>StringBuilder
  #<span class="number">50</span> <span class="operator">=</span> NameAndType        #<span class="number">75</span><span class="punctuation">:</span>#<span class="number">76</span>        <span spellcheck="true" class="comment">// append:(I)Ljava/lang/StringBuilder;</span>
  #<span class="number">51</span> <span class="operator">=</span> Utf8               <span class="punctuation">:</span>
  #<span class="number">52</span> <span class="operator">=</span> NameAndType        #<span class="number">75</span><span class="punctuation">:</span>#<span class="number">77</span>        <span spellcheck="true" class="comment">// append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span>
  #<span class="number">53</span> <span class="operator">=</span> NameAndType        #<span class="number">75</span><span class="punctuation">:</span>#<span class="number">78</span>        <span spellcheck="true" class="comment">// append:(J)Ljava/lang/StringBuilder;</span>
  #<span class="number">54</span> <span class="operator">=</span> NameAndType        #<span class="number">79</span><span class="punctuation">:</span>#<span class="number">80</span>        <span spellcheck="true" class="comment">// toString:()Ljava/lang/String;</span>
  #<span class="number">55</span> <span class="operator">=</span> NameAndType        #<span class="number">81</span><span class="punctuation">:</span>#<span class="number">65</span>        <span spellcheck="true" class="comment">// println:(Ljava/lang/String;)V</span>
  #<span class="number">56</span> <span class="operator">=</span> Utf8               time<span class="punctuation">:</span>
  #<span class="number">57</span> <span class="operator">=</span> Utf8               ms
  #<span class="number">58</span> <span class="operator">=</span> Utf8               done<span class="punctuation">.</span>
  #<span class="number">59</span> <span class="operator">=</span> Utf8               Main
  #<span class="number">60</span> <span class="operator">=</span> Utf8               java<span class="operator">/</span>lang<span class="operator">/</span>System
  #<span class="number">61</span> <span class="operator">=</span> Utf8               out
  #<span class="number">62</span> <span class="operator">=</span> Utf8               Ljava<span class="operator">/</span>io<span class="operator">/</span>PrintStream<span class="punctuation">;</span>
  #<span class="number">63</span> <span class="operator">=</span> Utf8               java<span class="operator">/</span>io<span class="operator">/</span>PrintStream
  #<span class="number">64</span> <span class="operator">=</span> Utf8               print
  #<span class="number">65</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>String<span class="punctuation">;</span><span class="punctuation">)</span>V
  #<span class="number">66</span> <span class="operator">=</span> Utf8               java<span class="operator">/</span>lang<span class="operator">/</span>Integer
  #<span class="number">67</span> <span class="operator">=</span> Utf8               parseInt
  #<span class="number">68</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>String<span class="punctuation">;</span><span class="punctuation">)</span>I
  #<span class="number">69</span> <span class="operator">=</span> Utf8               currentTimeMillis
  #<span class="number">70</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span><span class="punctuation">)</span>J
  #<span class="number">71</span> <span class="operator">=</span> Utf8               valueOf
  #<span class="number">72</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span>I<span class="punctuation">)</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>Integer<span class="punctuation">;</span>
  #<span class="number">73</span> <span class="operator">=</span> Utf8               format
  #<span class="number">74</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>String<span class="punctuation">;</span><span class="punctuation">[</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>Object<span class="punctuation">;</span><span class="punctuation">)</span>Ljava<span class="operator">/</span>io<span class="operator">/</span>PrintStream<span class="punctuation">;</span>
  #<span class="number">75</span> <span class="operator">=</span> Utf8               append
  #<span class="number">76</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span>I<span class="punctuation">)</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>StringBuilder<span class="punctuation">;</span>
  #<span class="number">77</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>String<span class="punctuation">;</span><span class="punctuation">)</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>StringBuilder<span class="punctuation">;</span>
  #<span class="number">78</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span>J<span class="punctuation">)</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>StringBuilder<span class="punctuation">;</span>
  #<span class="number">79</span> <span class="operator">=</span> Utf8               toString
  #<span class="number">80</span> <span class="operator">=</span> Utf8               <span class="punctuation">(</span><span class="punctuation">)</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>String<span class="punctuation">;</span>
  #<span class="number">81</span> <span class="operator">=</span> Utf8               println
<span class="punctuation">{</span>
  <span class="keyword">public</span> <span class="function">Main</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
    descriptor<span class="punctuation">:</span> <span class="punctuation">(</span><span class="punctuation">)</span>V
    flags<span class="punctuation">:</span> ACC_PUBLIC
    Code<span class="punctuation">:</span>
      stack<span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span> locals<span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span> args_size<span class="operator">=</span><span class="number">1</span>
         <span class="number">0</span><span class="punctuation">:</span> aload_0
         <span class="number">1</span><span class="punctuation">:</span> invokespecial #<span class="number">1</span>                  <span spellcheck="true" class="comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span>
         <span class="number">4</span><span class="punctuation">:</span> <span class="keyword">return</span>
      LineNumberTable<span class="punctuation">:</span>
        line <span class="number">1</span><span class="punctuation">:</span> <span class="number">0</span>

  <span class="keyword">public</span> <span class="keyword">static</span> long <span class="function">fib</span><span class="punctuation">(</span>int<span class="punctuation">)</span><span class="punctuation">;</span>
    descriptor<span class="punctuation">:</span> <span class="punctuation">(</span>I<span class="punctuation">)</span>J
    flags<span class="punctuation">:</span> ACC_PUBLIC<span class="punctuation">,</span> ACC_STATIC
    Code<span class="punctuation">:</span>
      stack<span class="operator">=</span><span class="number">4</span><span class="punctuation">,</span> locals<span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span> args_size<span class="operator">=</span><span class="number">1</span>
         <span class="number">0</span><span class="punctuation">:</span> iload_0
         <span class="number">1</span><span class="punctuation">:</span> iconst_1
         <span class="number">2</span><span class="punctuation">:</span> if_icmpgt     <span class="number">8</span>
         <span class="number">5</span><span class="punctuation">:</span> iload_0
         <span class="number">6</span><span class="punctuation">:</span> i2l
         <span class="number">7</span><span class="punctuation">:</span> lreturn
         <span class="number">8</span><span class="punctuation">:</span> iload_0
         <span class="number">9</span><span class="punctuation">:</span> iconst_1
        <span class="number">10</span><span class="punctuation">:</span> isub
        <span class="number">11</span><span class="punctuation">:</span> invokestatic  #<span class="number">2</span>                  <span spellcheck="true" class="comment">// Method fib:(I)J</span>
        <span class="number">14</span><span class="punctuation">:</span> iload_0
        <span class="number">15</span><span class="punctuation">:</span> iconst_2
        <span class="number">16</span><span class="punctuation">:</span> isub
        <span class="number">17</span><span class="punctuation">:</span> invokestatic  #<span class="number">2</span>                  <span spellcheck="true" class="comment">// Method fib:(I)J</span>
        <span class="number">20</span><span class="punctuation">:</span> ladd
        <span class="number">21</span><span class="punctuation">:</span> lreturn
      LineNumberTable<span class="punctuation">:</span>
        line <span class="number">4</span><span class="punctuation">:</span> <span class="number">0</span>
        line <span class="number">5</span><span class="punctuation">:</span> <span class="number">5</span>
        line <span class="number">6</span><span class="punctuation">:</span> <span class="number">8</span>
      StackMapTable<span class="punctuation">:</span> number_of_entries <span class="operator">=</span> <span class="number">1</span>
        frame_type <span class="operator">=</span> <span class="number">8</span> <span spellcheck="true" class="comment">/* same */</span>

  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="function">main</span><span class="punctuation">(</span>java<span class="punctuation">.</span>lang<span class="punctuation">.</span>String<span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">;</span>
    descriptor<span class="punctuation">:</span> <span class="punctuation">(</span><span class="punctuation">[</span>Ljava<span class="operator">/</span>lang<span class="operator">/</span>String<span class="punctuation">;</span><span class="punctuation">)</span>V
    flags<span class="punctuation">:</span> ACC_PUBLIC<span class="punctuation">,</span> ACC_STATIC
    Code<span class="punctuation">:</span>
      stack<span class="operator">=</span><span class="number">6</span><span class="punctuation">,</span> locals<span class="operator">=</span><span class="number">6</span><span class="punctuation">,</span> args_size<span class="operator">=</span><span class="number">1</span>
         <span class="number">0</span><span class="punctuation">:</span> aload_0
         <span class="number">1</span><span class="punctuation">:</span> arraylength
         <span class="number">2</span><span class="punctuation">:</span> ifne          <span class="number">14</span>
         <span class="number">5</span><span class="punctuation">:</span> getstatic     #<span class="number">3</span>                  <span spellcheck="true" class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span>
         <span class="number">8</span><span class="punctuation">:</span> ldc           #<span class="number">4</span>                  <span spellcheck="true" class="comment">// String help: java Fibonacci {Number}</span>
        <span class="number">10</span><span class="punctuation">:</span> invokevirtual #<span class="number">5</span>                  <span spellcheck="true" class="comment">// Method java/io/PrintStream.print:(Ljava/lang/String;)V</span>
        <span class="number">13</span><span class="punctuation">:</span> <span class="keyword">return</span>
        <span class="number">14</span><span class="punctuation">:</span> aload_0
        <span class="number">15</span><span class="punctuation">:</span> iconst_0
        <span class="number">16</span><span class="punctuation">:</span> aaload
        <span class="number">17</span><span class="punctuation">:</span> invokestatic  #<span class="number">6</span>                  <span spellcheck="true" class="comment">// Method java/lang/Integer.parseInt:(Ljava/lang/String;)I</span>
        <span class="number">20</span><span class="punctuation">:</span> istore_1
        <span class="number">21</span><span class="punctuation">:</span> invokestatic  #<span class="number">7</span>                  <span spellcheck="true" class="comment">// Method java/lang/System.currentTimeMillis:()J</span>
        <span class="number">24</span><span class="punctuation">:</span> lstore_2
        <span class="number">25</span><span class="punctuation">:</span> getstatic     #<span class="number">3</span>                  <span spellcheck="true" class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span>
        <span class="number">28</span><span class="punctuation">:</span> ldc           #<span class="number">8</span>                  <span spellcheck="true" class="comment">// String Fibonacci from 1 to %s:\n</span>
        <span class="number">30</span><span class="punctuation">:</span> iconst_1
        <span class="number">31</span><span class="punctuation">:</span> anewarray     #<span class="number">9</span>                  <span spellcheck="true" class="comment">// class java/lang/Object</span>
        <span class="number">34</span><span class="punctuation">:</span> dup
        <span class="number">35</span><span class="punctuation">:</span> iconst_0
        <span class="number">36</span><span class="punctuation">:</span> iload_1
        <span class="number">37</span><span class="punctuation">:</span> invokestatic  #<span class="number">10</span>                 <span spellcheck="true" class="comment">// Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;</span>
        <span class="number">40</span><span class="punctuation">:</span> aastore
        <span class="number">41</span><span class="punctuation">:</span> invokevirtual #<span class="number">11</span>                 <span spellcheck="true" class="comment">// Method java/io/PrintStream.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/io/PrintStream;</span>
        <span class="number">44</span><span class="punctuation">:</span> pop
        <span class="number">45</span><span class="punctuation">:</span> iconst_1
        <span class="number">46</span><span class="punctuation">:</span> istore        <span class="number">4</span>
        <span class="number">48</span><span class="punctuation">:</span> iload         <span class="number">4</span>
        <span class="number">50</span><span class="punctuation">:</span> iload_1
        <span class="number">51</span><span class="punctuation">:</span> if_icmpgt     <span class="number">94</span>
        <span class="number">54</span><span class="punctuation">:</span> getstatic     #<span class="number">3</span>                  <span spellcheck="true" class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span>
        <span class="number">57</span><span class="punctuation">:</span> <span class="keyword">new</span>           #<span class="number">12</span>                 <span spellcheck="true" class="comment">// class java/lang/StringBuilder</span>
        <span class="number">60</span><span class="punctuation">:</span> dup
        <span class="number">61</span><span class="punctuation">:</span> invokespecial #<span class="number">13</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V</span>
        <span class="number">64</span><span class="punctuation">:</span> iload         <span class="number">4</span>
        <span class="number">66</span><span class="punctuation">:</span> invokevirtual #<span class="number">14</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;</span>
        <span class="number">69</span><span class="punctuation">:</span> ldc           #<span class="number">15</span>                 <span spellcheck="true" class="comment">// String :</span>
        <span class="number">71</span><span class="punctuation">:</span> invokevirtual #<span class="number">16</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span>
        <span class="number">74</span><span class="punctuation">:</span> iload         <span class="number">4</span>
        <span class="number">76</span><span class="punctuation">:</span> invokestatic  #<span class="number">2</span>                  <span spellcheck="true" class="comment">// Method fib:(I)J</span>
        <span class="number">79</span><span class="punctuation">:</span> invokevirtual #<span class="number">17</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;</span>
        <span class="number">82</span><span class="punctuation">:</span> invokevirtual #<span class="number">18</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.toString:()Ljava/lang/String;</span>
        <span class="number">85</span><span class="punctuation">:</span> invokevirtual #<span class="number">19</span>                 <span spellcheck="true" class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span>
        <span class="number">88</span><span class="punctuation">:</span> iinc          <span class="number">4</span><span class="punctuation">,</span> <span class="number">1</span>
        <span class="number">91</span><span class="punctuation">:</span> goto          <span class="number">48</span>
        <span class="number">94</span><span class="punctuation">:</span> invokestatic  #<span class="number">7</span>                  <span spellcheck="true" class="comment">// Method java/lang/System.currentTimeMillis:()J</span>
        <span class="number">97</span><span class="punctuation">:</span> lstore        <span class="number">4</span>
        <span class="number">99</span><span class="punctuation">:</span> getstatic     #<span class="number">3</span>                  <span spellcheck="true" class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span>
       <span class="number">102</span><span class="punctuation">:</span> <span class="keyword">new</span>           #<span class="number">12</span>                 <span spellcheck="true" class="comment">// class java/lang/StringBuilder</span>
       <span class="number">105</span><span class="punctuation">:</span> dup
       <span class="number">106</span><span class="punctuation">:</span> invokespecial #<span class="number">13</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V</span>
       <span class="number">109</span><span class="punctuation">:</span> ldc           #<span class="number">20</span>                 <span spellcheck="true" class="comment">// String time:</span>
       <span class="number">111</span><span class="punctuation">:</span> invokevirtual #<span class="number">16</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span>
       <span class="number">114</span><span class="punctuation">:</span> lload         <span class="number">4</span>
       <span class="number">116</span><span class="punctuation">:</span> lload_2
       <span class="number">117</span><span class="punctuation">:</span> lsub
       <span class="number">118</span><span class="punctuation">:</span> invokevirtual #<span class="number">17</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;</span>
       <span class="number">121</span><span class="punctuation">:</span> ldc           #<span class="number">21</span>                 <span spellcheck="true" class="comment">// String ms</span>
       <span class="number">123</span><span class="punctuation">:</span> invokevirtual #<span class="number">16</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span>
       <span class="number">126</span><span class="punctuation">:</span> invokevirtual #<span class="number">18</span>                 <span spellcheck="true" class="comment">// Method java/lang/StringBuilder.toString:()Ljava/lang/String;</span>
       <span class="number">129</span><span class="punctuation">:</span> invokevirtual #<span class="number">19</span>                 <span spellcheck="true" class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span>
       <span class="number">132</span><span class="punctuation">:</span> getstatic     #<span class="number">3</span>                  <span spellcheck="true" class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span>
       <span class="number">135</span><span class="punctuation">:</span> ldc           #<span class="number">22</span>                 <span spellcheck="true" class="comment">// String done.</span>
       <span class="number">137</span><span class="punctuation">:</span> invokevirtual #<span class="number">19</span>                 <span spellcheck="true" class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span>
       <span class="number">140</span><span class="punctuation">:</span> <span class="keyword">return</span>
      LineNumberTable<span class="punctuation">:</span>
        line <span class="number">10</span><span class="punctuation">:</span> <span class="number">0</span>
        line <span class="number">11</span><span class="punctuation">:</span> <span class="number">5</span>
        line <span class="number">12</span><span class="punctuation">:</span> <span class="number">13</span>
        line <span class="number">15</span><span class="punctuation">:</span> <span class="number">14</span>
        line <span class="number">17</span><span class="punctuation">:</span> <span class="number">21</span>
        line <span class="number">18</span><span class="punctuation">:</span> <span class="number">25</span>
        line <span class="number">19</span><span class="punctuation">:</span> <span class="number">45</span>
        line <span class="number">20</span><span class="punctuation">:</span> <span class="number">54</span>
        line <span class="number">19</span><span class="punctuation">:</span> <span class="number">88</span>
        line <span class="number">22</span><span class="punctuation">:</span> <span class="number">94</span>
        line <span class="number">23</span><span class="punctuation">:</span> <span class="number">99</span>
        line <span class="number">25</span><span class="punctuation">:</span> <span class="number">132</span>
        line <span class="number">26</span><span class="punctuation">:</span> <span class="number">140</span>
      StackMapTable<span class="punctuation">:</span> number_of_entries <span class="operator">=</span> <span class="number">3</span>
        frame_type <span class="operator">=</span> <span class="number">14</span> <span spellcheck="true" class="comment">/* same */</span>
        frame_type <span class="operator">=</span> <span class="number">254</span> <span spellcheck="true" class="comment">/* append */</span>
          offset_delta <span class="operator">=</span> <span class="number">33</span>
          locals <span class="operator">=</span> <span class="punctuation">[</span> int<span class="punctuation">,</span> long<span class="punctuation">,</span> int <span class="punctuation">]</span>
        frame_type <span class="operator">=</span> <span class="number">250</span> <span spellcheck="true" class="comment">/* chop */</span>
          offset_delta <span class="operator">=</span> <span class="number">45</span>
<span class="punctuation">}</span>
SourceFile<span class="punctuation">:</span> <span class="string">&quot;Main.java&quot;</span></pre><p>那么，首先，我们看到的是对于java文件信息的一些标识、本文件的版本信息等信息，这些不是很重要，所以省略。
我们重点来说说该处的常量池。</p><pre class="prism language-undefined">#<span class="number">1</span> <span class="operator">=</span> Methodref          #<span class="number">9</span><span class="punctuation">.</span>#<span class="number">35</span>         <span spellcheck="true" class="comment">// java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></pre><p><code>#1</code>主要表示的是常量池的程序计数器（从1开始的），Methodref 表示的是用于记录方法信息 从#9 计数器进入 #35处被调用。而下面的</p><pre class="prism language-undefined"><span class="punctuation">{</span>
  <span class="keyword">public</span> <span class="function">Main</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
    descriptor<span class="punctuation">:</span> <span class="punctuation">(</span><span class="punctuation">)</span>V
    flags<span class="punctuation">:</span> ACC_PUBLIC
    Code<span class="punctuation">:</span>
      stack<span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span> locals<span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span> args_size<span class="operator">=</span><span class="number">1</span>
         <span class="number">0</span><span class="punctuation">:</span> aload_0
         <span class="number">1</span><span class="punctuation">:</span> invokespecial #<span class="number">1</span>                  <span spellcheck="true" class="comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span>
         <span class="number">4</span><span class="punctuation">:</span> <span class="keyword">return</span>
      LineNumberTable<span class="punctuation">:</span>
        line <span class="number">1</span><span class="punctuation">:</span> <span class="number">0</span>
<span class="punctuation">.</span><span class="punctuation">.</span><span class="punctuation">.</span></pre><p>表示的是类名、方法名，descriptor用来区分是类还是方法，flags 来表示方法是什么样的类型，code则是代码段， LineNumberTable 表示的是这个方法在原java的第几行。
那么我们着重分析一下</p><pre class="prism language-undefined">         <span class="number">0</span><span class="punctuation">:</span> aload_0
         <span class="number">1</span><span class="punctuation">:</span> invokespecial #<span class="number">1</span>                  <span spellcheck="true" class="comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span>
         <span class="number">4</span><span class="punctuation">:</span> <span class="keyword">return</span></pre><p>上面的三条指令：</p><p>aload_0:这个操作码是aload格式操作码中的一个。它们用来把对象引用加载到操作码栈。 表示正在被访问的局部变量数组的位置，但只能是0、1、2、3 中的一个。还有一些其它类似的操作码用来载入非对象引用的数据，如iload, lload, float 和 dload。其中 i 表示 int，l 表示 long，f 表示 float，d 表示 double。局部变量数组位置大于 3 的局部变量可以用 iload, lload, float, dload 和 aload 载入。这些操作码都只需要一个操作数，即数组中的位置。
invokespecial:这些操作码属于一组函数调用的操作码，包括：invokedynamic、invokeinterface、invokespecial、invokestatic、invokevirtual。在这个 class 文件中，invokespecial 和 invokevirutal 两个指令都用到了，两者的区别是，invokevirutal 指令调用一个对象的实例方法，invokespecial 指令调用实例初始化方法、私有方法、父类方法。
return：这个操作码属于ireturn、lreturn、freturn、dreturn、areturn 和 return 操作码组。每个操作码返回一种类型的返回值，其中 i 表示 int，l 表示 long，f 表示 float，d 表示 double，a 表示 对象引用。没有前缀类型字母的 return 表示返回 void。
对于上述的指令，都会有操作数栈来进行配合。如果操作数没用完则return ，则等待系统进行垃圾回收。若用完未取到则会跑出异常。
详细的指令信息可以在：<a href="https://docs.oracle.com/javase/specs/jvms/se7/html/index.html">https://docs.oracle.com/javase/specs/jvms/se7/html/index.html</a>  中见到</p><p>通过上述对于class类的简要分析，我们对jvm class文件有了一定的了解。接下来将讲述详细的内容以及如何去应用。</p></div></div><div class="inner-content"><h1><a href="/blog/java-jvm/">浅谈 node-jvm(1)</a></h1><p>2018-5-14 by MartinDelophy</p><hr/><div><p>前不久，在github不小心看到了一个node-jvm 不由得惊叹，node竟然也能写出jvm，故clone了一波来看看到底是何方神圣。
地址:<a href="https://github.com/YaroslavGaponov/node-jvm">https://github.com/YaroslavGaponov/node-jvm</a></p><p>首先那肯定是看一下官方案例的，官方主要是用fibonacci.js 来new了一个jvm，然后设定日志等级，载入class文件，设定异步事件，就开始执行了。感觉很ok</p><p>那么，我们先看看它jvm地方的源码吧，首先，看到的是这句话,无用的代码暂时省略</p><pre class="prism language-undefined"><span class="keyword">var</span> JVM <span class="operator">=</span> module<span class="punctuation">.</span>exports <span class="operator">=</span> <span class="keyword">function</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">if</span> <span class="punctuation">(</span><span class="keyword">this</span> <span class="keyword">instanceof</span> <span class="class-name">JVM</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        JVM<span class="punctuation">.</span>super_<span class="punctuation">.</span><span class="function">call</span><span class="punctuation">(</span><span class="keyword">this</span><span class="punctuation">)</span><span class="punctuation">;</span>
        THREADS<span class="punctuation">.</span><span class="function">add</span><span class="punctuation">(</span><span class="keyword">new</span> <span class="class-name">Thread</span><span class="punctuation">(</span><span class="string">&quot;main&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>

        <span class="keyword">this</span><span class="punctuation">.</span>entryPoint <span class="operator">=</span> <span class="punctuation">{</span>
            className<span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span>
            methodName<span class="punctuation">:</span> <span class="string">&quot;main&quot;</span>
        <span class="punctuation">}</span><span class="punctuation">;</span>
    <span class="punctuation">}</span> <span class="keyword">else</span> <span class="punctuation">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> <span class="class-name">JVM</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p>代码很直观，我们可以看到一开始，如果该对象是通过jvm new出来的对象就进行入 JVM.super_.call这句话中，如果不是则 new 一下返回。</p><p>这几个地方还是比较容易理解的，除了这句 JVM.super<em>.call，我翻遍了代码，但是却没有找到这个super</em> 方法,那么这个super_  方法是哪里来的呢？
幸运的是，另外一句话也同样引起了我的注意</p><pre class="prism language-undefined"><span class="keyword">var</span> util <span class="operator">=</span> <span class="function">require</span><span class="punctuation">(</span><span class="string">&quot;util&quot;</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">var</span> EE <span class="operator">=</span> <span class="function">require</span><span class="punctuation">(</span><span class="string">&quot;events&quot;</span><span class="punctuation">)</span><span class="punctuation">.</span>EventEmitter<span class="punctuation">;</span>
util<span class="punctuation">.</span><span class="function">inherits</span><span class="punctuation">(</span>JVM<span class="punctuation">,</span> EE<span class="punctuation">)</span><span class="punctuation">;</span></pre><p>util.inherits指的是将 require(&quot;events&quot;).EventEmitter 方法继承到JVM中,那么super_ 从哪里来的呢，我们还是不知道，通过 这篇blog的帮助(<a href="https://www.cnblogs.com/youlechang123/p/5602335.html),我们看到了一段代码">https://www.cnblogs.com/youlechang123/p/5602335.html),我们看到了一段代码</a></p><pre class="prism language-undefined">exports<span class="punctuation">.</span>inherits <span class="operator">=</span> <span class="keyword">function</span><span class="punctuation">(</span>ctor<span class="punctuation">,</span> superCtor<span class="punctuation">)</span> <span class="punctuation">{</span>
 ctor<span class="punctuation">.</span>super_ <span class="operator">=</span> superCtor<span class="punctuation">;</span>
 ctor<span class="punctuation">.</span>prototype <span class="operator">=</span> Object<span class="punctuation">.</span><span class="function">create</span><span class="punctuation">(</span>superCtor<span class="punctuation">.</span>prototype<span class="punctuation">,</span> <span class="punctuation">{</span>
 constructor<span class="punctuation">:</span> <span class="punctuation">{</span>
  value<span class="punctuation">:</span> ctor<span class="punctuation">,</span>
  enumerable<span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span>
  writable<span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span>
  configurable<span class="punctuation">:</span> <span class="keyword">true</span>
 <span class="punctuation">}</span>
 <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="punctuation">}</span><span class="punctuation">;</span></pre><p>这下，我恍然大悟，原来JVM.super_ 不仅这样出来，而且其中存放的是 EventEmitter 这个函数,并且在prototype中存放了 EventEmitter的原型，也就是说JVM可以获得EventEmitter中的所有方法，这也就可以解释了为什么JVM new出之后可以设定异步事件。</p><p>node-jvm 是一个比较庞大的部分，今天先分析到这里，在下一章中我会告诉大家一个有效的工具。</p></div></div><div class="inner-content"><h1><a href="/blog/java-annotation/">java 注解</a></h1><p>2017-5-13 by MartinDelophy</p><hr/><div><p>从读研开始做OA项目一晃将近半年了，一直在用到java方面的注解，愚钝的我直到现在才开始考虑到如何自定义注解，从网上看到了一个好例子，分享出来给需要帮助的人使用。</p><p>那么首先我们先做一个接口，这个接口的作用是作为注解引用的，里面做了一个枚举类型，定义了一个Tt()方法，默认值为C</p><pre class="prism language-undefined">@<span class="function">Target</span><span class="punctuation">(</span>ElementType<span class="punctuation">.</span>FIELD<span class="punctuation">)</span>  
@<span class="function">Retention</span><span class="punctuation">(</span>RetentionPolicy<span class="punctuation">.</span>RUNTIME<span class="punctuation">)</span>  
@Inherited  
@Documented  
<span class="keyword">public</span> @<span class="keyword">interface</span> <span class="class-name">test</span> <span class="punctuation">{</span>
  <span class="keyword">public</span> <span class="keyword">enum</span> T<span class="punctuation">{</span> A<span class="punctuation">,</span>B<span class="punctuation">,</span>C<span class="punctuation">}</span><span class="punctuation">;</span>
      T  <span class="function">Tt</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="keyword">default</span> T<span class="punctuation">.</span>C<span class="punctuation">;</span> 
<span class="punctuation">}</span></pre><p>之后我们定义了一个 test2的类，外加一个主函数目的很简单，就是为了让test3去读我们test2的class类</p><pre class="prism language-undefined"><span class="keyword">public</span> <span class="keyword">class</span> <span class="class-name">test2</span> <span class="punctuation">{</span>
    @<span class="function">test</span><span class="punctuation">(</span>Tt<span class="operator">=</span> test<span class="punctuation">.</span>T<span class="punctuation">.</span>C<span class="punctuation">)</span>
    <span class="keyword">private</span> String t<span class="punctuation">;</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="function">main</span><span class="punctuation">(</span>String<span class="punctuation">[</span><span class="punctuation">]</span> args<span class="punctuation">)</span> <span class="punctuation">{</span>
                test3<span class="punctuation">.</span><span class="function">gettest</span><span class="punctuation">(</span>test2<span class="punctuation">.</span><span class="keyword">class</span><span class="punctuation">)</span><span class="punctuation">;</span>
          <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p>test3就是看test2的类中有没有test注解，有的话就是输出来看看</p><pre class="prism language-undefined"><span class="keyword">public</span> <span class="keyword">class</span> <span class="class-name">test3</span> <span class="punctuation">{</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="function">gettest</span><span class="punctuation">(</span>Class<span class="operator">&lt;</span><span class="operator">?</span><span class="operator">&gt;</span> clazz<span class="punctuation">)</span> <span class="punctuation">{</span>

             String str<span class="operator">=</span><span class="string">&quot;&quot;</span><span class="punctuation">;</span>

         Field<span class="punctuation">[</span><span class="punctuation">]</span> fields <span class="operator">=</span> clazz<span class="punctuation">.</span><span class="function">getDeclaredFields</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>

         <span class="keyword">for</span><span class="punctuation">(</span>Field field <span class="punctuation">:</span>fields<span class="punctuation">)</span> <span class="punctuation">{</span>

                <span class="keyword">if</span><span class="punctuation">(</span>field<span class="punctuation">.</span><span class="function">isAnnotationPresent</span><span class="punctuation">(</span>test<span class="punctuation">.</span><span class="keyword">class</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">{</span>

                  test t<span class="operator">=</span><span class="punctuation">(</span>test<span class="punctuation">)</span> field<span class="punctuation">.</span><span class="function">getAnnotation</span><span class="punctuation">(</span>test<span class="punctuation">.</span><span class="keyword">class</span><span class="punctuation">)</span><span class="punctuation">;</span>

                   str<span class="operator">=</span>str<span class="operator">+</span>t<span class="punctuation">.</span><span class="function">Tt</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>

                   System<span class="punctuation">.</span>out<span class="punctuation">.</span><span class="function">println</span><span class="punctuation">(</span>str<span class="punctuation">)</span><span class="punctuation">;</span>
        <span class="punctuation">}</span>
    <span class="punctuation">}</span>
  <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p>结果，控制台输出的是 C，因为一开始将枚举中，默认的C传入，再字符串拼接，显示</p></div></div></div><div class="nav-docs"><div class="nav-docs-section"><h3>Subscribe</h3><a rel="home" type="application/rss+xml" href="/blog/rss.xml">RSS</a></div><div class="nav-docs-section"><h3>Recent Posts</h3><ul><li><a href="/blog/java-backengineering/">java 反向工程</a></li><li><a href="/blog/continous-publish/">持续发布项目</a></li><li><a href="/blog/model-engine/">java script 模版引擎初探</a></li><li><a href="/blog/java-jvm2/">浅谈 node-jvm(2)</a></li><li><a href="/blog/java-jvm/">浅谈 node-jvm(1)</a></li><li><a href="/blog/java-annotation/">java 注解</a></li></ul></div></div></div></section><footer><section><a class="footer-home" href="/">MartinDelophy powered by graphql.org</a></section></footer></body></html><script>if (!this.readyState || this.readyState == "complete") { window.loadlive2d("live2d","/static/live2d-widget-model-shizuku/assets/shizuku.model.json") }</script>